{
    "id": "e41057e7-9b5c-45e9-ab12-3bc9a92d98ea",
    "name": "ETL fhir to omop",
    "edges": [
        {
            "id": "reactflow__edge-bc7f2e99-5533-4719-b86a-1a9a83da684fsource_bc7f2e99-5533-4719-b86a-1a9a83da684f_dataframe-1c9c746c-1ef1-4bca-b294-59e8d81f0fe3target_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_any",
            "source": "bc7f2e99-5533-4719-b86a-1a9a83da684f",
            "target": "1c9c746c-1ef1-4bca-b294-59e8d81f0fe3",
            "selected": false,
            "sourceHandle": "source_bc7f2e99-5533-4719-b86a-1a9a83da684f_dataframe",
            "targetHandle": "target_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_any"
        },
        {
            "id": "reactflow__edge-b52d463b-e05c-44ad-90a9-7ac912b35314source_b52d463b-e05c-44ad-90a9-7ac912b35314_dataframe-1c9c746c-1ef1-4bca-b294-59e8d81f0fe3target_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_any",
            "source": "b52d463b-e05c-44ad-90a9-7ac912b35314",
            "target": "1c9c746c-1ef1-4bca-b294-59e8d81f0fe3",
            "selected": false,
            "sourceHandle": "source_b52d463b-e05c-44ad-90a9-7ac912b35314_dataframe",
            "targetHandle": "target_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_any"
        },
        {
            "id": "reactflow__edge-4a4209c6-84f1-4afe-85a6-2c3aecfee44bsource_4a4209c6-84f1-4afe-85a6-2c3aecfee44b_dataframe-1c9c746c-1ef1-4bca-b294-59e8d81f0fe3target_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_any",
            "source": "4a4209c6-84f1-4afe-85a6-2c3aecfee44b",
            "target": "1c9c746c-1ef1-4bca-b294-59e8d81f0fe3",
            "selected": false,
            "sourceHandle": "source_4a4209c6-84f1-4afe-85a6-2c3aecfee44b_dataframe",
            "targetHandle": "target_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_any"
        },
        {
            "id": "reactflow__edge-fcab0880-2901-49fb-8e3c-e73735a07030source_fcab0880-2901-49fb-8e3c-e73735a07030_dataframe-1c9c746c-1ef1-4bca-b294-59e8d81f0fe3target_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_any",
            "source": "fcab0880-2901-49fb-8e3c-e73735a07030",
            "target": "1c9c746c-1ef1-4bca-b294-59e8d81f0fe3",
            "selected": false,
            "sourceHandle": "source_fcab0880-2901-49fb-8e3c-e73735a07030_dataframe",
            "targetHandle": "target_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_any"
        },
        {
            "id": "reactflow__edge-97d2d719-131e-4e91-9965-5dacc4f77bbasource_97d2d719-131e-4e91-9965-5dacc4f77bba_dataframe-1c9c746c-1ef1-4bca-b294-59e8d81f0fe3target_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_any",
            "source": "97d2d719-131e-4e91-9965-5dacc4f77bba",
            "target": "1c9c746c-1ef1-4bca-b294-59e8d81f0fe3",
            "selected": false,
            "sourceHandle": "source_97d2d719-131e-4e91-9965-5dacc4f77bba_dataframe",
            "targetHandle": "target_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_any"
        },
        {
            "id": "reactflow__edge-644c6dc1-72bf-4f5b-8a64-620407a36e3asource_644c6dc1-72bf-4f5b-8a64-620407a36e3a_dataframe-1c9c746c-1ef1-4bca-b294-59e8d81f0fe3target_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_any",
            "source": "644c6dc1-72bf-4f5b-8a64-620407a36e3a",
            "target": "1c9c746c-1ef1-4bca-b294-59e8d81f0fe3",
            "selected": false,
            "sourceHandle": "source_644c6dc1-72bf-4f5b-8a64-620407a36e3a_dataframe",
            "targetHandle": "target_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_any"
        },
        {
            "id": "reactflow__edge-140dffdd-9b98-46a7-ae23-b2b8a6a79a4esource_140dffdd-9b98-46a7-ae23-b2b8a6a79a4e_dataframe-1c9c746c-1ef1-4bca-b294-59e8d81f0fe3target_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_any",
            "source": "140dffdd-9b98-46a7-ae23-b2b8a6a79a4e",
            "target": "1c9c746c-1ef1-4bca-b294-59e8d81f0fe3",
            "selected": false,
            "sourceHandle": "source_140dffdd-9b98-46a7-ae23-b2b8a6a79a4e_dataframe",
            "targetHandle": "target_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_any"
        },
        {
            "id": "reactflow__edge-c1e62222-8885-4467-811f-52e80cf4e3b6source_c1e62222-8885-4467-811f-52e80cf4e3b6_dataframe-1c9c746c-1ef1-4bca-b294-59e8d81f0fe3target_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_any",
            "source": "c1e62222-8885-4467-811f-52e80cf4e3b6",
            "target": "1c9c746c-1ef1-4bca-b294-59e8d81f0fe3",
            "selected": false,
            "sourceHandle": "source_c1e62222-8885-4467-811f-52e80cf4e3b6_dataframe",
            "targetHandle": "target_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_any"
        },
        {
            "id": "reactflow__edge-230782cf-935e-4354-9c89-db8a2f37bf99source_230782cf-935e-4354-9c89-db8a2f37bf99_dataframe-1c9c746c-1ef1-4bca-b294-59e8d81f0fe3target_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_any",
            "source": "230782cf-935e-4354-9c89-db8a2f37bf99",
            "target": "1c9c746c-1ef1-4bca-b294-59e8d81f0fe3",
            "selected": false,
            "sourceHandle": "source_230782cf-935e-4354-9c89-db8a2f37bf99_dataframe",
            "targetHandle": "target_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_any"
        },
        {
            "id": "reactflow__edge-1c9c746c-1ef1-4bca-b294-59e8d81f0fe3source_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_object-9658364f-9788-4bbd-91f4-2fb8fdde5d1btarget_9658364f-9788-4bbd-91f4-2fb8fdde5d1b_object",
            "source": "1c9c746c-1ef1-4bca-b294-59e8d81f0fe3",
            "target": "9658364f-9788-4bbd-91f4-2fb8fdde5d1b",
            "selected": false,
            "sourceHandle": "source_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_object",
            "targetHandle": "target_9658364f-9788-4bbd-91f4-2fb8fdde5d1b_object"
        },
        {
            "id": "reactflow__edge-1c9c746c-1ef1-4bca-b294-59e8d81f0fe3source_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_object-3c3f5888-5462-4fa6-8e9b-132d06e3e3d5target_3c3f5888-5462-4fa6-8e9b-132d06e3e3d5_object",
            "source": "1c9c746c-1ef1-4bca-b294-59e8d81f0fe3",
            "target": "3c3f5888-5462-4fa6-8e9b-132d06e3e3d5",
            "selected": false,
            "sourceHandle": "source_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_object",
            "targetHandle": "target_3c3f5888-5462-4fa6-8e9b-132d06e3e3d5_object"
        },
        {
            "id": "reactflow__edge-1c9c746c-1ef1-4bca-b294-59e8d81f0fe3source_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_object-227a0e41-40fc-4219-90e5-2c46ea7b1879target_227a0e41-40fc-4219-90e5-2c46ea7b1879_object",
            "source": "1c9c746c-1ef1-4bca-b294-59e8d81f0fe3",
            "target": "227a0e41-40fc-4219-90e5-2c46ea7b1879",
            "selected": false,
            "sourceHandle": "source_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_object",
            "targetHandle": "target_227a0e41-40fc-4219-90e5-2c46ea7b1879_object"
        },
        {
            "id": "reactflow__edge-1c9c746c-1ef1-4bca-b294-59e8d81f0fe3source_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_object-3c69d63f-131c-4ce0-a9cb-a735c1bfd8abtarget_3c69d63f-131c-4ce0-a9cb-a735c1bfd8ab_object",
            "source": "1c9c746c-1ef1-4bca-b294-59e8d81f0fe3",
            "target": "3c69d63f-131c-4ce0-a9cb-a735c1bfd8ab",
            "selected": false,
            "sourceHandle": "source_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_object",
            "targetHandle": "target_3c69d63f-131c-4ce0-a9cb-a735c1bfd8ab_object"
        },
        {
            "id": "reactflow__edge-1c9c746c-1ef1-4bca-b294-59e8d81f0fe3source_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_object-e332b9d8-a600-4d2a-94cb-fff53ab01a5dtarget_e332b9d8-a600-4d2a-94cb-fff53ab01a5d_object",
            "source": "1c9c746c-1ef1-4bca-b294-59e8d81f0fe3",
            "target": "e332b9d8-a600-4d2a-94cb-fff53ab01a5d",
            "selected": false,
            "sourceHandle": "source_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_object",
            "targetHandle": "target_e332b9d8-a600-4d2a-94cb-fff53ab01a5d_object"
        },
        {
            "id": "reactflow__edge-1c9c746c-1ef1-4bca-b294-59e8d81f0fe3source_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_object-5d62e682-992f-4788-8855-5216eebad563target_5d62e682-992f-4788-8855-5216eebad563_object",
            "source": "1c9c746c-1ef1-4bca-b294-59e8d81f0fe3",
            "target": "5d62e682-992f-4788-8855-5216eebad563",
            "selected": false,
            "sourceHandle": "source_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_object",
            "targetHandle": "target_5d62e682-992f-4788-8855-5216eebad563_object"
        },
        {
            "id": "reactflow__edge-1c9c746c-1ef1-4bca-b294-59e8d81f0fe3source_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_object-f67d926f-24be-4a64-848b-8f9e69a5e55etarget_f67d926f-24be-4a64-848b-8f9e69a5e55e_object",
            "source": "1c9c746c-1ef1-4bca-b294-59e8d81f0fe3",
            "target": "f67d926f-24be-4a64-848b-8f9e69a5e55e",
            "selected": false,
            "sourceHandle": "source_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_object",
            "targetHandle": "target_f67d926f-24be-4a64-848b-8f9e69a5e55e_object"
        },
        {
            "id": "reactflow__edge-1c9c746c-1ef1-4bca-b294-59e8d81f0fe3source_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_object-dbb730a1-1499-462e-9d67-4585bb9a9662target_dbb730a1-1499-462e-9d67-4585bb9a9662_object",
            "source": "1c9c746c-1ef1-4bca-b294-59e8d81f0fe3",
            "target": "dbb730a1-1499-462e-9d67-4585bb9a9662",
            "sourceHandle": "source_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_object",
            "targetHandle": "target_dbb730a1-1499-462e-9d67-4585bb9a9662_object"
        },
        {
            "id": "reactflow__edge-1c9c746c-1ef1-4bca-b294-59e8d81f0fe3source_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_object-f758c084-1da4-4a3c-8f96-af873953b6c6target_f758c084-1da4-4a3c-8f96-af873953b6c6_object",
            "source": "1c9c746c-1ef1-4bca-b294-59e8d81f0fe3",
            "target": "f758c084-1da4-4a3c-8f96-af873953b6c6",
            "sourceHandle": "source_1c9c746c-1ef1-4bca-b294-59e8d81f0fe3_object",
            "targetHandle": "target_f758c084-1da4-4a3c-8f96-af873953b6c6_object"
        },
        {
            "id": "reactflow__edge-9658364f-9788-4bbd-91f4-2fb8fdde5d1bsource_9658364f-9788-4bbd-91f4-2fb8fdde5d1b_dataframe-07cfed06-756e-4cb8-b65b-1d763fb4a98ftarget_07cfed06-756e-4cb8-b65b-1d763fb4a98f_dataframe",
            "source": "9658364f-9788-4bbd-91f4-2fb8fdde5d1b",
            "target": "07cfed06-756e-4cb8-b65b-1d763fb4a98f",
            "sourceHandle": "source_9658364f-9788-4bbd-91f4-2fb8fdde5d1b_dataframe",
            "targetHandle": "target_07cfed06-756e-4cb8-b65b-1d763fb4a98f_dataframe"
        },
        {
            "id": "reactflow__edge-07cfed06-756e-4cb8-b65b-1d763fb4a98fsource_07cfed06-756e-4cb8-b65b-1d763fb4a98f_dataframe-5f6d6ed6-01e1-4186-89cc-6574cd046d40target_5f6d6ed6-01e1-4186-89cc-6574cd046d40_dataframe",
            "source": "07cfed06-756e-4cb8-b65b-1d763fb4a98f",
            "target": "5f6d6ed6-01e1-4186-89cc-6574cd046d40",
            "sourceHandle": "source_07cfed06-756e-4cb8-b65b-1d763fb4a98f_dataframe",
            "targetHandle": "target_5f6d6ed6-01e1-4186-89cc-6574cd046d40_dataframe"
        },
        {
            "id": "reactflow__edge-f758c084-1da4-4a3c-8f96-af873953b6c6source_f758c084-1da4-4a3c-8f96-af873953b6c6_dataframe-0a9450ec-38f8-4c3f-b735-1f2abbdd3fc3target_0a9450ec-38f8-4c3f-b735-1f2abbdd3fc3_dataframe",
            "source": "f758c084-1da4-4a3c-8f96-af873953b6c6",
            "target": "0a9450ec-38f8-4c3f-b735-1f2abbdd3fc3",
            "sourceHandle": "source_f758c084-1da4-4a3c-8f96-af873953b6c6_dataframe",
            "targetHandle": "target_0a9450ec-38f8-4c3f-b735-1f2abbdd3fc3_dataframe"
        },
        {
            "id": "reactflow__edge-0a9450ec-38f8-4c3f-b735-1f2abbdd3fc3source_0a9450ec-38f8-4c3f-b735-1f2abbdd3fc3_dataframe-cf76f9a9-321b-469f-8779-fc8945fd50f6target_cf76f9a9-321b-469f-8779-fc8945fd50f6_dataframe",
            "source": "0a9450ec-38f8-4c3f-b735-1f2abbdd3fc3",
            "target": "cf76f9a9-321b-469f-8779-fc8945fd50f6",
            "sourceHandle": "source_0a9450ec-38f8-4c3f-b735-1f2abbdd3fc3_dataframe",
            "targetHandle": "target_cf76f9a9-321b-469f-8779-fc8945fd50f6_dataframe"
        },
        {
            "id": "reactflow__edge-dbb730a1-1499-462e-9d67-4585bb9a9662source_dbb730a1-1499-462e-9d67-4585bb9a9662_dataframe-2db7ffaa-b9cc-4bd2-8f62-5a0059c5cea0target_2db7ffaa-b9cc-4bd2-8f62-5a0059c5cea0_dataframe",
            "source": "dbb730a1-1499-462e-9d67-4585bb9a9662",
            "target": "2db7ffaa-b9cc-4bd2-8f62-5a0059c5cea0",
            "sourceHandle": "source_dbb730a1-1499-462e-9d67-4585bb9a9662_dataframe",
            "targetHandle": "target_2db7ffaa-b9cc-4bd2-8f62-5a0059c5cea0_dataframe"
        },
        {
            "id": "reactflow__edge-2db7ffaa-b9cc-4bd2-8f62-5a0059c5cea0source_2db7ffaa-b9cc-4bd2-8f62-5a0059c5cea0_dataframe-a51a4106-095e-49a8-a868-db5874ed60f5target_a51a4106-095e-49a8-a868-db5874ed60f5_dataframe",
            "source": "2db7ffaa-b9cc-4bd2-8f62-5a0059c5cea0",
            "target": "a51a4106-095e-49a8-a868-db5874ed60f5",
            "sourceHandle": "source_2db7ffaa-b9cc-4bd2-8f62-5a0059c5cea0_dataframe",
            "targetHandle": "target_a51a4106-095e-49a8-a868-db5874ed60f5_dataframe"
        },
        {
            "id": "reactflow__edge-f67d926f-24be-4a64-848b-8f9e69a5e55esource_f67d926f-24be-4a64-848b-8f9e69a5e55e_dataframe-ab80716e-87b1-479c-bd4e-c95d43b35fe6target_ab80716e-87b1-479c-bd4e-c95d43b35fe6_dataframe",
            "source": "f67d926f-24be-4a64-848b-8f9e69a5e55e",
            "target": "ab80716e-87b1-479c-bd4e-c95d43b35fe6",
            "sourceHandle": "source_f67d926f-24be-4a64-848b-8f9e69a5e55e_dataframe",
            "targetHandle": "target_ab80716e-87b1-479c-bd4e-c95d43b35fe6_dataframe"
        },
        {
            "id": "reactflow__edge-ab80716e-87b1-479c-bd4e-c95d43b35fe6source_ab80716e-87b1-479c-bd4e-c95d43b35fe6_dataframe-345c3710-002f-4c6d-843b-94e873927548target_345c3710-002f-4c6d-843b-94e873927548_dataframe",
            "source": "ab80716e-87b1-479c-bd4e-c95d43b35fe6",
            "target": "345c3710-002f-4c6d-843b-94e873927548",
            "sourceHandle": "source_ab80716e-87b1-479c-bd4e-c95d43b35fe6_dataframe",
            "targetHandle": "target_345c3710-002f-4c6d-843b-94e873927548_dataframe"
        },
        {
            "id": "reactflow__edge-5d62e682-992f-4788-8855-5216eebad563source_5d62e682-992f-4788-8855-5216eebad563_dataframe-b7f82a01-dd6e-4b76-bd72-53d069da2e72target_b7f82a01-dd6e-4b76-bd72-53d069da2e72_dataframe",
            "source": "5d62e682-992f-4788-8855-5216eebad563",
            "target": "b7f82a01-dd6e-4b76-bd72-53d069da2e72",
            "sourceHandle": "source_5d62e682-992f-4788-8855-5216eebad563_dataframe",
            "targetHandle": "target_b7f82a01-dd6e-4b76-bd72-53d069da2e72_dataframe"
        },
        {
            "id": "reactflow__edge-b7f82a01-dd6e-4b76-bd72-53d069da2e72source_b7f82a01-dd6e-4b76-bd72-53d069da2e72_dataframe-9fff2d40-4802-46a6-9e9a-7615c47b7754target_9fff2d40-4802-46a6-9e9a-7615c47b7754_dataframe",
            "source": "b7f82a01-dd6e-4b76-bd72-53d069da2e72",
            "target": "9fff2d40-4802-46a6-9e9a-7615c47b7754",
            "sourceHandle": "source_b7f82a01-dd6e-4b76-bd72-53d069da2e72_dataframe",
            "targetHandle": "target_9fff2d40-4802-46a6-9e9a-7615c47b7754_dataframe"
        },
        {
            "id": "reactflow__edge-e332b9d8-a600-4d2a-94cb-fff53ab01a5dsource_e332b9d8-a600-4d2a-94cb-fff53ab01a5d_dataframe-4578bc25-72aa-4c34-8693-a820dad6527btarget_4578bc25-72aa-4c34-8693-a820dad6527b_dataframe",
            "source": "e332b9d8-a600-4d2a-94cb-fff53ab01a5d",
            "target": "4578bc25-72aa-4c34-8693-a820dad6527b",
            "sourceHandle": "source_e332b9d8-a600-4d2a-94cb-fff53ab01a5d_dataframe",
            "targetHandle": "target_4578bc25-72aa-4c34-8693-a820dad6527b_dataframe"
        },
        {
            "id": "reactflow__edge-4578bc25-72aa-4c34-8693-a820dad6527bsource_4578bc25-72aa-4c34-8693-a820dad6527b_dataframe-b3e0cbd2-1680-4d5a-8a58-a74d636f1696target_b3e0cbd2-1680-4d5a-8a58-a74d636f1696_dataframe",
            "source": "4578bc25-72aa-4c34-8693-a820dad6527b",
            "target": "b3e0cbd2-1680-4d5a-8a58-a74d636f1696",
            "sourceHandle": "source_4578bc25-72aa-4c34-8693-a820dad6527b_dataframe",
            "targetHandle": "target_b3e0cbd2-1680-4d5a-8a58-a74d636f1696_dataframe"
        },
        {
            "id": "reactflow__edge-3c69d63f-131c-4ce0-a9cb-a735c1bfd8absource_3c69d63f-131c-4ce0-a9cb-a735c1bfd8ab_dataframe-369f82ce-d9bb-40dd-aa10-e6acf3849bc5target_369f82ce-d9bb-40dd-aa10-e6acf3849bc5_dataframe",
            "source": "3c69d63f-131c-4ce0-a9cb-a735c1bfd8ab",
            "target": "369f82ce-d9bb-40dd-aa10-e6acf3849bc5",
            "sourceHandle": "source_3c69d63f-131c-4ce0-a9cb-a735c1bfd8ab_dataframe",
            "targetHandle": "target_369f82ce-d9bb-40dd-aa10-e6acf3849bc5_dataframe"
        },
        {
            "id": "reactflow__edge-369f82ce-d9bb-40dd-aa10-e6acf3849bc5source_369f82ce-d9bb-40dd-aa10-e6acf3849bc5_dataframe-c59e95aa-1642-4f04-a07d-c19a496aca91target_c59e95aa-1642-4f04-a07d-c19a496aca91_dataframe",
            "source": "369f82ce-d9bb-40dd-aa10-e6acf3849bc5",
            "target": "c59e95aa-1642-4f04-a07d-c19a496aca91",
            "sourceHandle": "source_369f82ce-d9bb-40dd-aa10-e6acf3849bc5_dataframe",
            "targetHandle": "target_c59e95aa-1642-4f04-a07d-c19a496aca91_dataframe"
        },
        {
            "id": "reactflow__edge-227a0e41-40fc-4219-90e5-2c46ea7b1879source_227a0e41-40fc-4219-90e5-2c46ea7b1879_dataframe-53923929-57cc-4bac-b644-78348d982bb3target_53923929-57cc-4bac-b644-78348d982bb3_dataframe",
            "source": "227a0e41-40fc-4219-90e5-2c46ea7b1879",
            "target": "53923929-57cc-4bac-b644-78348d982bb3",
            "sourceHandle": "source_227a0e41-40fc-4219-90e5-2c46ea7b1879_dataframe",
            "targetHandle": "target_53923929-57cc-4bac-b644-78348d982bb3_dataframe"
        },
        {
            "id": "reactflow__edge-53923929-57cc-4bac-b644-78348d982bb3source_53923929-57cc-4bac-b644-78348d982bb3_dataframe-5b177aca-870c-4745-95e1-6305ee390261target_5b177aca-870c-4745-95e1-6305ee390261_dataframe",
            "source": "53923929-57cc-4bac-b644-78348d982bb3",
            "target": "5b177aca-870c-4745-95e1-6305ee390261",
            "sourceHandle": "source_53923929-57cc-4bac-b644-78348d982bb3_dataframe",
            "targetHandle": "target_5b177aca-870c-4745-95e1-6305ee390261_dataframe"
        },
        {
            "id": "reactflow__edge-3c3f5888-5462-4fa6-8e9b-132d06e3e3d5source_3c3f5888-5462-4fa6-8e9b-132d06e3e3d5_dataframe-14f6c52b-5c9e-4cb7-8ed9-8636c4e6bed8target_14f6c52b-5c9e-4cb7-8ed9-8636c4e6bed8_dataframe",
            "source": "3c3f5888-5462-4fa6-8e9b-132d06e3e3d5",
            "target": "14f6c52b-5c9e-4cb7-8ed9-8636c4e6bed8",
            "sourceHandle": "source_3c3f5888-5462-4fa6-8e9b-132d06e3e3d5_dataframe",
            "targetHandle": "target_14f6c52b-5c9e-4cb7-8ed9-8636c4e6bed8_dataframe"
        },
        {
            "id": "reactflow__edge-14f6c52b-5c9e-4cb7-8ed9-8636c4e6bed8source_14f6c52b-5c9e-4cb7-8ed9-8636c4e6bed8_dataframe-4b92d9e9-6a59-459f-8fc5-5a8ff5824bcatarget_4b92d9e9-6a59-459f-8fc5-5a8ff5824bca_dataframe",
            "source": "14f6c52b-5c9e-4cb7-8ed9-8636c4e6bed8",
            "target": "4b92d9e9-6a59-459f-8fc5-5a8ff5824bca",
            "sourceHandle": "source_14f6c52b-5c9e-4cb7-8ed9-8636c4e6bed8_dataframe",
            "targetHandle": "target_4b92d9e9-6a59-459f-8fc5-5a8ff5824bca_dataframe"
        }
    ],
    "nodes": [
        {
            "id": "bc7f2e99-5533-4719-b86a-1a9a83da684f",
            "data": {
                "name": "AllergyIntolerance",
                "error": false,
                "database": "d2e_fhir",
                "sqlquery": "select content from \"fhir\".\"AllergyIntolerance\"",
                "testdata": [
                    []
                ],
                "description": "Get fhir data for AllergyIntolerance resource",
                "errorMessage": null
            },
            "type": "db_reader_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": -930,
                "y": -110
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": -930,
                "y": -110
            }
        },
        {
            "id": "5f6d6ed6-01e1-4186-89cc-6574cd046d40",
            "data": {
                "name": "insert_into_omop_observation",
                "error": false,
                "database": "alpdev_pg",
                "dataframe": "transform_to_Observation",
                "schemaname": "cdm_ds1_1761010593",
                "dbtablename": "observation",
                "description": "Insert into omop cdm database table",
                "errorMessage": null
            },
            "type": "db_writer_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": 1540,
                "y": -190
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 1540,
                "y": -190
            }
        },
        {
            "id": "b52d463b-e05c-44ad-90a9-7ac912b35314",
            "data": {
                "name": "Patient",
                "error": false,
                "database": "d2e_fhir",
                "sqlquery": "select content from \"fhir\".\"Patient\"",
                "testdata": [
                    []
                ],
                "description": "Get fhir data for Patient resource",
                "errorMessage": null
            },
            "type": "db_reader_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": -1140,
                "y": 170
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": -1140,
                "y": 170
            }
        },
        {
            "id": "4b92d9e9-6a59-459f-8fc5-5a8ff5824bca",
            "data": {
                "name": "Insert_into_omop_person",
                "error": false,
                "database": "alpdev_pg",
                "dataframe": "transform_to_person",
                "schemaname": "cdm_ds1_1761010593",
                "dbtablename": "person",
                "description": "Insert into cdm omop database",
                "errorMessage": null
            },
            "type": "db_writer_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": 1540,
                "y": 120
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 1540,
                "y": 120
            }
        },
        {
            "id": "4a4209c6-84f1-4afe-85a6-2c3aecfee44b",
            "data": {
                "name": "Condition",
                "error": false,
                "database": "d2e_fhir",
                "sqlquery": "select content from \"fhir\".\"Condition\"",
                "testdata": [
                    []
                ],
                "description": "Get fhir data for Condition resource",
                "errorMessage": null
            },
            "type": "db_reader_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": -1180,
                "y": 450
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": -1180,
                "y": 450
            }
        },
        {
            "id": "5b177aca-870c-4745-95e1-6305ee390261",
            "data": {
                "name": "Insert_into_omop_condition_occurrence",
                "error": false,
                "database": "alpdev_pg",
                "dataframe": "transform_to_condition_occurrence",
                "schemaname": "cdm_ds1_1761010593",
                "dbtablename": "condition_occurrence",
                "description": "Insert into omop cdm database",
                "errorMessage": null
            },
            "type": "db_writer_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": 1520,
                "y": 430
            },
            "selected": true,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 1520,
                "y": 430
            }
        },
        {
            "id": "fcab0880-2901-49fb-8e3c-e73735a07030",
            "data": {
                "name": "Encounter",
                "error": false,
                "database": "d2e_fhir",
                "sqlquery": "select content from \"fhir\".\"Encounter\"",
                "testdata": [
                    []
                ],
                "description": "Get fhir data for Encounter resource",
                "errorMessage": null
            },
            "type": "db_reader_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": -1170,
                "y": 700
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": -1170,
                "y": 700
            }
        },
        {
            "id": "c59e95aa-1642-4f04-a07d-c19a496aca91",
            "data": {
                "name": "Insert_into_omop_visit_occurrence",
                "error": false,
                "database": "alpdev_pg",
                "dataframe": "transform_to_visit_occurrence",
                "schemaname": "cdm_ds1_1761010593",
                "dbtablename": "visit_occurrence",
                "description": "Insert into omop cdm database",
                "errorMessage": null
            },
            "type": "db_writer_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": 1500,
                "y": 730
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 1500,
                "y": 730
            }
        },
        {
            "id": "97d2d719-131e-4e91-9965-5dacc4f77bba",
            "data": {
                "name": "Immunization",
                "error": false,
                "database": "d2e_fhir",
                "sqlquery": "select content from \"fhir\".\"Immunization\"",
                "testdata": [
                    []
                ],
                "description": "Get fhir data for Immunization resource",
                "errorMessage": null
            },
            "type": "db_reader_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": -1150,
                "y": 960
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": -1150,
                "y": 960
            }
        },
        {
            "id": "b3e0cbd2-1680-4d5a-8a58-a74d636f1696",
            "data": {
                "name": "Insert_into_omop_drug_exposure",
                "error": false,
                "database": "alpdev_pg",
                "dataframe": "transform_to_drug_exposure",
                "schemaname": "cdm_ds1_1761010593",
                "dbtablename": "drug_exposure",
                "description": "Insert into omop cdm database",
                "errorMessage": null
            },
            "type": "db_writer_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": 1510,
                "y": 1000
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 1510,
                "y": 1000
            }
        },
        {
            "id": "644c6dc1-72bf-4f5b-8a64-620407a36e3a",
            "data": {
                "name": "Observation",
                "error": false,
                "database": "d2e_fhir",
                "sqlquery": "select content from \"fhir\".\"Observation\"",
                "testdata": [
                    []
                ],
                "description": "Get fhir data for Observation resource",
                "errorMessage": null
            },
            "type": "db_reader_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": -1120,
                "y": 1220
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": -1120,
                "y": 1220
            }
        },
        {
            "id": "9fff2d40-4802-46a6-9e9a-7615c47b7754",
            "data": {
                "name": "Insert_into_omop_measurement",
                "error": false,
                "database": "alpdev_pg",
                "dataframe": "transform_to_measurement",
                "schemaname": "cdm_ds1_1761010593",
                "dbtablename": "measurement",
                "description": "Insert into omop cdm database",
                "errorMessage": null
            },
            "type": "db_writer_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": 1500,
                "y": 1290
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 1500,
                "y": 1290
            }
        },
        {
            "id": "140dffdd-9b98-46a7-ae23-b2b8a6a79a4e",
            "data": {
                "name": "MedicationStatement",
                "error": false,
                "database": "d2e_fhir",
                "sqlquery": "select content from \"fhir\".\"MedicationStatement\"",
                "testdata": [
                    []
                ],
                "description": "Get fhir data for MedicationStatement resource",
                "errorMessage": null
            },
            "type": "db_reader_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": -1030,
                "y": 1520
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": -1030,
                "y": 1520
            }
        },
        {
            "id": "345c3710-002f-4c6d-843b-94e873927548",
            "data": {
                "name": "Insert_into_omop_drug_exposure",
                "database": "alpdev_pg",
                "dataframe": "transform_to_drug_exposure",
                "schemaname": "cdm_ds1_1761010593",
                "dbtablename": "drug_exposure",
                "description": "Insert into omop cdm database"
            },
            "type": "db_writer_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": 1500,
                "y": 1580
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 1500,
                "y": 1580
            }
        },
        {
            "id": "c1e62222-8885-4467-811f-52e80cf4e3b6",
            "data": {
                "name": "Observation",
                "database": "d2e_fhir",
                "sqlquery": "select content from \"fhir\".\"Observation\"",
                "testdata": [
                    []
                ],
                "description": "Get fhir data for Observation resource"
            },
            "type": "db_reader_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": -860,
                "y": 1840
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": -860,
                "y": 1840
            }
        },
        {
            "id": "a51a4106-095e-49a8-a868-db5874ed60f5",
            "data": {
                "name": "Insert_into_omop_observation",
                "error": false,
                "database": "alpdev_pg",
                "dataframe": "transform_to_observation",
                "schemaname": "cdm_ds1_1761010593",
                "dbtablename": "observation",
                "description": "Insert into omop cdm database",
                "errorMessage": null
            },
            "type": "db_writer_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": 1500,
                "y": 1850
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 1500,
                "y": 1850
            }
        },
        {
            "id": "230782cf-935e-4354-9c89-db8a2f37bf99",
            "data": {
                "name": "Procedure",
                "error": false,
                "database": "d2e_fhir",
                "sqlquery": "select content from \"fhir\".\"Procedure\"",
                "testdata": [
                    []
                ],
                "description": "Get fhir data for Procedure resource",
                "errorMessage": null
            },
            "type": "db_reader_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": -780,
                "y": 2170
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": -780,
                "y": 2170
            }
        },
        {
            "id": "cf76f9a9-321b-469f-8779-fc8945fd50f6",
            "data": {
                "name": "Insert_into_omop_procedure_occurrence",
                "error": false,
                "database": "alpdev_pg",
                "dataframe": "transform_to_procedure_occurrence",
                "schemaname": "cdm_ds1_1761010593",
                "dbtablename": "procedure_occurrence",
                "description": "Insert into omop cdm database",
                "errorMessage": null
            },
            "type": "db_writer_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": 1480,
                "y": 2180
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 1480,
                "y": 2180
            }
        },
        {
            "id": "1c9c746c-1ef1-4bca-b294-59e8d81f0fe3",
            "data": {
                "name": "python_node",
                "error": false,
                "description": "Describe the task of node python_node_0",
                "python_code": "def exec(myinput):\n  transformed = {}\n  for key, result_obj in myinput.items():\n    transformed[key] = result_obj.result\n  return transformed\ndef test_exec(myinput):\n  return \"This is test_exec function\"",
                "errorMessage": null
            },
            "type": "python_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": -420,
                "y": 930
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": -420,
                "y": 930
            }
        },
        {
            "id": "9658364f-9788-4bbd-91f4-2fb8fdde5d1b",
            "data": {
                "map": {},
                "name": "AllergyIntolerance_df",
                "error": false,
                "uiMap": {
                    "path": "$.AllergyIntolerance",
                    "source": "python_node"
                },
                "description": "Describe the task of node py2table_node_0",
                "errorMessage": null
            },
            "type": "py2table_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": 20,
                "y": -120
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 20,
                "y": -120
            }
        },
        {
            "id": "3c3f5888-5462-4fa6-8e9b-132d06e3e3d5",
            "data": {
                "map": {},
                "name": "Patient_df",
                "error": false,
                "uiMap": {
                    "path": "$.Patient",
                    "source": "python_node"
                },
                "description": "Describe the task of node py2table_node_1",
                "errorMessage": null
            },
            "type": "py2table_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": 130,
                "y": 170
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 130,
                "y": 170
            }
        },
        {
            "id": "227a0e41-40fc-4219-90e5-2c46ea7b1879",
            "data": {
                "map": {},
                "name": "Condition_df",
                "error": false,
                "uiMap": {
                    "path": "$.Condition",
                    "source": "python_node"
                },
                "description": "Describe the task of node py2table_node_2",
                "errorMessage": null
            },
            "type": "py2table_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": 150,
                "y": 450
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 150,
                "y": 450
            }
        },
        {
            "id": "3c69d63f-131c-4ce0-a9cb-a735c1bfd8ab",
            "data": {
                "map": {},
                "name": "Encounter_df",
                "error": false,
                "uiMap": {
                    "path": "$.Encounter",
                    "source": "python_node"
                },
                "description": "Describe the task of node py2table_node_3",
                "errorMessage": null
            },
            "type": "py2table_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": 140,
                "y": 740
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 140,
                "y": 740
            }
        },
        {
            "id": "e332b9d8-a600-4d2a-94cb-fff53ab01a5d",
            "data": {
                "map": {},
                "name": "Immunization_df",
                "error": false,
                "uiMap": {
                    "path": "$.Immunization",
                    "source": "python_node"
                },
                "description": "Describe the task of node py2table_node_4",
                "errorMessage": null
            },
            "type": "py2table_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": 90,
                "y": 1010
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 90,
                "y": 1010
            }
        },
        {
            "id": "5d62e682-992f-4788-8855-5216eebad563",
            "data": {
                "map": {},
                "name": "Observation_df",
                "error": false,
                "uiMap": {
                    "path": "$.Observation",
                    "source": "python_node"
                },
                "description": "Describe the task of node py2table_node_5",
                "errorMessage": null
            },
            "type": "py2table_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": 140,
                "y": 1310
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 140,
                "y": 1310
            }
        },
        {
            "id": "f67d926f-24be-4a64-848b-8f9e69a5e55e",
            "data": {
                "map": {},
                "name": "MedicationStatement_df",
                "error": false,
                "uiMap": {
                    "path": "$.MedicationStatement",
                    "source": "python_node"
                },
                "description": "Describe the task of node py2table_node_6",
                "errorMessage": null
            },
            "type": "py2table_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": 140,
                "y": 1600
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 140,
                "y": 1600
            }
        },
        {
            "id": "dbb730a1-1499-462e-9d67-4585bb9a9662",
            "data": {
                "map": {},
                "name": "Observation_df",
                "uiMap": {
                    "path": "$.Observation",
                    "source": "python_node"
                },
                "description": "Describe the task of node py2table_node_7"
            },
            "type": "py2table_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": 140,
                "y": 1870
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 140,
                "y": 1870
            }
        },
        {
            "id": "f758c084-1da4-4a3c-8f96-af873953b6c6",
            "data": {
                "map": {},
                "name": "Procedure_df",
                "error": false,
                "uiMap": {
                    "path": "$.Procedure",
                    "source": "python_node"
                },
                "description": "Describe the task of node py2table_node_8",
                "errorMessage": null
            },
            "type": "py2table_node",
            "width": 350,
            "height": 210,
            "dragging": false,
            "position": {
                "x": 90,
                "y": 2180
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 90,
                "y": 2180
            }
        },
        {
            "id": "07cfed06-756e-4cb8-b65b-1d763fb4a98f",
            "data": {
                "id": "AllergeMap",
                "name": "transform_to_Observation",
                "error": false,
                "dataframe": "AllergyIntolerance_df",
                "description": "Describe the task of node transform_fhir_data_node_0",
                "errorMessage": null,
                "structure_map": "{     \"resourceType\": \"StructureMap\",     \"id\": \"AllergyMap\",     \"text\": {         \"status\": \"generated\",         \"div\": \"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"><p class=\\\"res-header-id\\\"><b>Generated Narrative: StructureMap AllergyMap</b></p><a name=\\\"AllergyMap\\\"> </a><a name=\\\"hcAllergyMap\\\"> </a><pre class=\\\"fml\\\">\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>url</b> = </span><span style=\\\"color: blue\\\">'http://hl7.org/fhir/uv/omop/StructureMap/AllergyMap'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>name</b> = </span><span style=\\\"color: blue\\\">'AllergyMap'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>title</b> = </span><span style=\\\"color: blue\\\">'Mapping Allergy resource to Observation OMOP Domain'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>status</b> = </span><span style=\\\"color: blue\\\">'draft'</span>\\r\\n\\r\\n<b>uses</b><span style=\\\"color: navy\\\"> &quot;</span><a href=\\\"http://hl7.org/fhir/R5/allergyintolerance.html\\\" title=\\\"AllergyIntolerance\\\">http://hl7.org/fhir/StructureDefinition/AllergyIntolerance</a><span style=\\\"color: navy\\\">&quot; </span><b>alias </b>Allergy <b>as </b><b>source</b>\\r\\n<b>uses</b><span style=\\\"color: navy\\\"> &quot;</span><a href=\\\"StructureDefinition-Observation.html\\\" title=\\\"Observation OMOP Table\\\">http://hl7.org/fhir/uv/omop/StructureDefinition/Observation</a><span style=\\\"color: navy\\\">&quot; </span><b>alias </b>ObservationTable <b>as </b><b>target</b>\\r\\n\\r\\n<b>group </b>Observation<span style=\\\"color: navy\\\">(</span><b>source</b> <span style=\\\"color: maroon\\\">src</span><span style=\\\"color: navy\\\"> : </span>Allergy, <b>target</b> <span style=\\\"color: maroon\\\">tgt</span><span style=\\\"color: navy\\\"> : </span>ObservationTable<span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\"> {\\r\\n</span>  src.code<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    s.coding<b> as </b><span style=\\\"color: maroon\\\">sc</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      sc.code<span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.observation_concept_id<span style=\\\"color: navy\\\">, </span> tgt.observation_source_value<span style=\\\"color: navy\\\">, </span> tgt.observation_source_concept_id<span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span> <span style=\\\"color: navy\\\">// </span><span style=\\\"color: green\\\">src.id as id -&gt; tgt.observation_id = cast(id, &quot;integer&quot;);</span>\\r\\n  src.onset<span style=\\\"color: navy\\\"> : </span>dateTime<b> as </b><span style=\\\"color: maroon\\\">osd</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.observation_date = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">osd</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'date'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">, </span> tgt.observation_datetime = <span style=\\\"color: maroon\\\">osd</span><span style=\\\"color: navy\\\">;</span> <span style=\\\"color: navy\\\">// </span><span style=\\\"color: green\\\">src.patient as s -&gt; tgt then {</span>\\r\\n  src.reaction<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    s.manifestation<b> as </b><span style=\\\"color: maroon\\\">sman</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      sman.concept<b> as </b><span style=\\\"color: maroon\\\">smanc</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>        smanc.coding<b> as </b><span style=\\\"color: maroon\\\">sc</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>          sc.code<span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.value_as_concept_id<span style=\\\"color: navy\\\">, </span> tgt.value_source_value<span style=\\\"color: navy\\\">;</span>\\r\\n        <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n      <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n<span style=\\\"color: navy\\\">}\\r\\n\\r\\n</span></pre></div>\"     },     \"extension\": [         {             \"url\": \"http://hl7.org/fhir/StructureDefinition/structuredefinition-wg\",             \"valueCode\": \"brr\"         },         {             \"url\": \"http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm\",             \"valueInteger\": 1,             \"_valueInteger\": {                 \"extension\": [                     {                         \"url\": \"http://hl7.org/fhir/StructureDefinition/structuredefinition-conformance-derivedFrom\",                         \"valueCanonical\": \"http://hl7.org/fhir/uv/omop/ImplementationGuide/hl7.fhir.uv.omop\"                     }                 ]             }         },         {             \"url\": \"http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status\",             \"valueCode\": \"informative\",             \"_valueCode\": {                 \"extension\": [                     {                         \"url\": \"http://hl7.org/fhir/StructureDefinition/structuredefinition-conformance-derivedFrom\",                         \"valueCanonical\": \"http://hl7.org/fhir/uv/omop/ImplementationGuide/hl7.fhir.uv.omop\"                     }                 ]             }         }     ],     \"url\": \"http://hl7.org/fhir/uv/omop/StructureMap/AllergyMap\",     \"version\": \"1.0.0-ballot\",     \"name\": \"AllergyMap\",     \"title\": \"Mapping Allergy resource to Observation OMOP Domain\",     \"status\": \"draft\",     \"date\": \"2025-07-29T17:40:15+00:00\",     \"publisher\": \"HL7 International / Biomedical Research and Regulation\",     \"contact\": [         {             \"name\": \"HL7 International / Biomedical Research and Regulation\",             \"telecom\": [                 {                     \"system\": \"url\",                     \"value\": \"http://www.hl7.org/Special/committees/rcrim\"                 }             ]         }     ],     \"description\": \"This mapping maps FHIR AllergyIntolerance instances to OMOP Observation Table objects.\",     \"jurisdiction\": [         {             \"coding\": [                 {                     \"system\": \"http://unstats.un.org/unsd/methods/m49/m49.htm\",                     \"code\": \"001\",                     \"display\": \"World\"                 }             ]         }     ],     \"structure\": [         {             \"url\": \"http://hl7.org/fhir/StructureDefinition/AllergyIntolerance\",             \"mode\": \"source\",             \"alias\": \"Allergy\"         },         {             \"url\": \"http://hl7.org/fhir/uv/omop/StructureDefinition/Observation\",             \"mode\": \"target\",             \"alias\": \"ObservationTable\"         }     ],     \"group\": [         {             \"name\": \"Observation\",             \"input\": [                 {                     \"name\": \"src\",                     \"type\": \"Allergy\",                     \"mode\": \"source\"                 },                 {                     \"name\": \"tgt\",                     \"type\": \"ObservationTable\",                     \"mode\": \"target\"                 }             ],             \"rule\": [                 {                     \"name\": \"mapObservationId\",                     \"documentation\": \"Generate a unique OMOP observation_id.\",                     \"source\": [                         {                             \"context\": \"src\",                             \"element\": \"id\",                             \"variable\": \"fhirId\"                         }                     ],                     \"target\": [                         {                             \"context\": \"tgt\",                             \"element\": \"observation_id\",                             \"transform\": \"copy\",                             \"parameter\": [                                 {                                     \"valueId\": \"fhirId\"                                 }                             ]                         }                     ]                 },                 {                     \"name\": \"mapPatientId\",                     \"source\": [                         {                             \"context\": \"src\",                             \"element\": \"patient.reference\",                             \"variable\": \"patRef\"                         }                     ],                     \"target\": [                         {                             \"context\": \"tgt\",                             \"element\": \"person_id\",                             \"transform\": \"copy\",                             \"parameter\": [                                 {                                     \"valueId\": \"patRef\"                                 }                             ]                         }                     ]                 },                 {                     \"name\": \"code\",                     \"source\": [                         {                             \"context\": \"src\",                             \"element\": \"code\",                             \"variable\": \"s\"                         }                     ],                     \"target\": [                         {                             \"transform\": \"copy\",                             \"parameter\": [                                 {                                     \"valueId\": \"tgt\"                                 }                             ]                         }                     ],                     \"rule\": [                         {                             \"name\": \"coding\",                             \"source\": [                                 {                                     \"context\": \"s\",                                     \"element\": \"coding\",                                     \"variable\": \"sc\"                                 }                             ],                             \"target\": [                                 {                                     \"transform\": \"copy\",                                     \"context\": \"tgt\",                                     \"parameter\": [                                         {                                             \"valueId\": \"sc\"                                         }                                     ]                                 }                             ],                             \"rule\": [                                 {                                     \"name\": \"code\",                                     \"source\": [                                         {                                             \"context\": \"sc\",                                             \"element\": \"code\",                                             \"variable\": \"sc_code\"                                         }                                     ],                                     \"target\": [                                         {                                             \"context\": \"tgt\",                                             \"element\": \"observation_concept_id\",                                             \"transform\": \"copy\",                                             \"parameter\": [                                                 {                                                     \"valueId\": \"sc_code\"                                                 }                                             ]                                         },                                         {                                             \"context\": \"tgt\",                                             \"element\": \"observation_source_value\",                                             \"transform\": \"copy\",                                             \"parameter\": [                                                 {                                                     \"valueId\": \"sc_code\"                                                 }                                             ]                                         },                                         {                                             \"context\": \"tgt\",                                             \"element\": \"observation_source_concept_id\",                                             \"transform\": \"copy\",                                             \"parameter\": [                                                 {                                                     \"valueId\": \"sc_code\"                                                 }                                             ]                                         }                                     ]                                 }                             ]                         }                     ],                     \"documentation\": \"src.id as id -> tgt.observation_id = cast(id, \\\"integer\\\");\"                 },                 {                     \"name\": \"onsetDateTime\",                     \"source\": [                         {                             \"context\": \"src\",                             \"type\": \"dateTime\",                             \"element\": \"onset\",                             \"variable\": \"osd\"                         }                     ],                     \"target\": [                         {                             \"context\": \"tgt\",                             \"element\": \"observation_date\",                             \"transform\": \"copy\",                             \"parameter\": [                                 {                                     \"valueId\": \"osd\"                                 },                                 {                                     \"valueString\": \"date\"                                 }                             ]                         },                         {                             \"context\": \"tgt\",                             \"element\": \"observation_datetime\",                             \"transform\": \"copy\",                             \"parameter\": [                                 {                                     \"valueId\": \"osd\"                                 }                             ]                         }                     ],                     \"documentation\": \"src.patient as s -> tgt then {\"                 },                 {                     \"name\": \"mapObservationTypeConceptId\",                     \"documentation\": \"Derive OMOP observation_type_concept_id based on FHIR AllergyIntolerance provenance.\",                     \"source\": [                         {                             \"context\": \"src\",                             \"element\": \"id\",                             \"variable\": \"conceptId\"                         }                     ],                     \"target\": [                         {                             \"context\": \"tgt\",                             \"element\": \"observation_type_concept_id\",                             \"transform\": \"copy\",                             \"parameter\": [                                 {                                     \"valueId\": \"conceptId\"                                 }                             ]                         }                     ]                 }             ]         }     ] }",
                "output_omop_data": ""
            },
            "type": "transform_fhir_data_node",
            "width": 353,
            "height": 213,
            "dragging": false,
            "position": {
                "x": 730,
                "y": -190
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 730,
                "y": -190
            }
        },
        {
            "id": "0a9450ec-38f8-4c3f-b735-1f2abbdd3fc3",
            "data": {
                "id": "ProcedureMap",
                "name": "transform_to_procedure_occurrence",
                "error": false,
                "dataframe": "Procedure_df",
                "description": "Describe the task of node transform_fhir_data_node_1",
                "errorMessage": null,
                "structure_map": "{\"resourceType\":\"StructureMap\",\"id\":\"ProcedureMap\",\"text\":{\"status\":\"generated\",\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"><p class=\\\"res-header-id\\\"><b>Generated Narrative: StructureMap ProcedureMap</b></p><a name=\\\"ProcedureMap\\\"> </a><a name=\\\"hcProcedureMap\\\"> </a><pre class=\\\"fml\\\">\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>url</b> = </span><span style=\\\"color: blue\\\">'http://hl7.org/fhir/uv/omop/StructureMap/ProcedureMap'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>name</b> = </span><span style=\\\"color: blue\\\">'ProcedureMap'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>title</b> = </span><span style=\\\"color: blue\\\">'Mapping Procedure resource to Procedure Occurrence OMOP Domain'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>status</b> = </span><span style=\\\"color: blue\\\">'draft'</span>\\r\\n\\r\\n<b>uses</b><span style=\\\"color: navy\\\"> &quot;</span><a href=\\\"http://hl7.org/fhir/R5/procedure.html\\\" title=\\\"Procedure\\\">http://hl7.org/fhir/StructureDefinition/Procedure</a><span style=\\\"color: navy\\\">&quot; </span><b>alias </b>Procedure <b>as </b><b>source</b>\\r\\n<b>uses</b><span style=\\\"color: navy\\\"> &quot;</span><a href=\\\"StructureDefinition-ProcedureOccurrence.html\\\" title=\\\"Procedure Occurrence OMOP Table\\\">http://hl7.org/fhir/uv/omop/StructureDefinition/ProcedureOccurrence</a><span style=\\\"color: navy\\\">&quot; </span><b>alias </b>ProcedureTable <b>as </b><b>target</b>\\r\\n\\r\\n<b>group </b>ProcedureOccurrence<span style=\\\"color: navy\\\">(</span><b>source</b> <span style=\\\"color: maroon\\\">src</span><span style=\\\"color: navy\\\"> : </span>Procedure, <b>target</b> <span style=\\\"color: maroon\\\">tgt</span><span style=\\\"color: navy\\\"> : </span>ProcedureTable<span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\"> {\\r\\n</span>  src.code<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    s.coding<b> as </b><span style=\\\"color: maroon\\\">sc</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      sc.code<b> as </b><span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.procedure_concept_id<span style=\\\"color: navy\\\">, </span> tgt.procedure_source_value<span style=\\\"color: navy\\\">, </span> tgt.procedure_source_concept_id = <span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span> <span style=\\\"color: navy\\\">// </span><span style=\\\"color: green\\\">src.id as id -&gt; tgt.procedure_occurrence_id = cast(id, &quot;integer&quot;);</span>\\r\\n  src.occurrence<span style=\\\"color: navy\\\"> : </span>dateTime<b> as </b><span style=\\\"color: maroon\\\">edt</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.procedure_datetime = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">edt</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'dateTime'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">, </span> tgt.procedure_date = <span style=\\\"color: maroon\\\">edt</span><span style=\\\"color: navy\\\">;</span>\\r\\n  src.occurrence<span style=\\\"color: navy\\\"> : </span>Period<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    s.start<b> as </b><span style=\\\"color: maroon\\\">start</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.procedure_datetime = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">start</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'dateTime'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">, </span> tgt.procedure_date = <span style=\\\"color: maroon\\\">start</span><span style=\\\"color: navy\\\">;</span>\\r\\n    s.end<b> as </b><span style=\\\"color: maroon\\\">end</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.procedure_end_datetime<span style=\\\"color: navy\\\">, </span> tgt.procedure_end_date = <span style=\\\"color: maroon\\\">end</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n<span style=\\\"color: navy\\\">}\\r\\n\\r\\n</span></pre></div>\"},\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-wg\",\"valueCode\":\"brr\"},{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm\",\"valueInteger\":1,\"_valueInteger\":{\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-conformance-derivedFrom\",\"valueCanonical\":\"http://hl7.org/fhir/uv/omop/ImplementationGuide/hl7.fhir.uv.omop\"}]}},{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status\",\"valueCode\":\"informative\",\"_valueCode\":{\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-conformance-derivedFrom\",\"valueCanonical\":\"http://hl7.org/fhir/uv/omop/ImplementationGuide/hl7.fhir.uv.omop\"}]}}],\"url\":\"http://hl7.org/fhir/uv/omop/StructureMap/ProcedureMap\",\"version\":\"1.0.0-ballot\",\"name\":\"ProcedureMap\",\"title\":\"Mapping Procedure resource to Procedure Occurrence OMOP Domain\",\"status\":\"draft\",\"date\":\"2025-07-29T17:40:15+00:00\",\"publisher\":\"HL7 International / Biomedical Research and Regulation\",\"contact\":[{\"name\":\"HL7 International / Biomedical Research and Regulation\",\"telecom\":[{\"system\":\"url\",\"value\":\"http://www.hl7.org/Special/committees/rcrim\"}]}],\"description\":\"This mapping maps FHIR Procedure instances to OMOP Procedure Occurrence Table objects.\",\"jurisdiction\":[{\"coding\":[{\"system\":\"http://unstats.un.org/unsd/methods/m49/m49.htm\",\"code\":\"001\",\"display\":\"World\"}]}],\"structure\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/Procedure\",\"mode\":\"source\",\"alias\":\"Procedure\"},{\"url\":\"http://hl7.org/fhir/uv/omop/StructureDefinition/ProcedureOccurrence\",\"mode\":\"target\",\"alias\":\"ProcedureTable\"}],\"group\":[{\"name\":\"ProcedureOccurrence\",\"input\":[{\"name\":\"src\",\"type\":\"Procedure\",\"mode\":\"source\"},{\"name\":\"tgt\",\"type\":\"ProcedureTable\",\"mode\":\"target\"}],\"rule\":[{\"name\":\"id\",\"source\":[{\"context\":\"src\",\"element\":\"id\",\"variable\":\"pid\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"procedure_occurrence_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"pid\"}]}]},{\"name\":\"procedure_type_concept_id\",\"source\":[{\"context\":\"src\",\"element\":\"id\",\"variable\":\"procedure_type_concept_id\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"procedure_type_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueInteger\":45905771}]}]},{\"name\":\"mapPatientId\",\"source\":[{\"context\":\"src\",\"element\":\"subject.reference\",\"variable\":\"patientRefId\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"person_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"patientRefId\"}]}]},{\"name\":\"code\",\"source\":[{\"context\":\"src\",\"element\":\"code\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"coding\",\"source\":[{\"context\":\"s\",\"element\":\"coding\",\"variable\":\"sc\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"code\",\"source\":[{\"context\":\"sc\",\"element\":\"code\",\"variable\":\"a\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"procedure_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]},{\"context\":\"tgt\",\"element\":\"procedure_source_value\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]},{\"context\":\"tgt\",\"element\":\"procedure_source_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]}]}]}],\"documentation\":\"src.id as id -> tgt.procedure_occurrence_id = cast(id, \\\"integer\\\");\"},{\"name\":\"occurrenceDateTime\",\"source\":[{\"context\":\"src\",\"type\":\"dateTime\",\"element\":\"performedDateTime\",\"variable\":\"edt\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"procedure_datetime\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"edt\"},{\"valueString\":\"dateTime\"}]},{\"context\":\"tgt\",\"element\":\"procedure_date\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"edt\"}]}]},{\"name\":\"occurrencePeriod\",\"source\":[{\"context\":\"src\",\"type\":\"Period\",\"element\":\"performedPeriod\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"start\",\"source\":[{\"context\":\"s\",\"element\":\"start\",\"variable\":\"start\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"procedure_datetime\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"start\"},{\"valueString\":\"dateTime\"}]},{\"context\":\"tgt\",\"element\":\"procedure_date\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"start\"}]}]},{\"name\":\"end\",\"source\":[{\"context\":\"s\",\"element\":\"end\",\"variable\":\"end\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"procedure_end_datetime\"},{\"context\":\"tgt\",\"element\":\"procedure_end_date\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"end\"}]}]}]}]}]}",
                "output_omop_data": ""
            },
            "type": "transform_fhir_data_node",
            "width": 353,
            "height": 213,
            "dragging": false,
            "position": {
                "x": 770,
                "y": 2170
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 770,
                "y": 2170
            }
        },
        {
            "id": "2db7ffaa-b9cc-4bd2-8f62-5a0059c5cea0",
            "data": {
                "id": "ObservationMap",
                "name": "transform_to_observation",
                "error": false,
                "dataframe": "Observation_df",
                "description": "Describe the task of node transform_fhir_data_node_2",
                "errorMessage": null,
                "structure_map": "{\"resourceType\":\"StructureMap\",\"id\":\"ObservationMap\",\"text\":{\"status\":\"generated\",\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"><p class=\\\"res-header-id\\\"><b>Generated Narrative: StructureMap ObservationMap</b></p><a name=\\\"ObservationMap\\\"> </a><a name=\\\"hcObservationMap\\\"> </a><pre class=\\\"fml\\\">\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>url</b> = </span><span style=\\\"color: blue\\\">'http://hl7.org/fhir/uv/omop/StructureMap/ObservationMap'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>name</b> = </span><span style=\\\"color: blue\\\">'ObservationMap'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>title</b> = </span><span style=\\\"color: blue\\\">'Mapping Observation resource to  Observation OMOP Domain'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>status</b> = </span><span style=\\\"color: blue\\\">'draft'</span>\\r\\n\\r\\n<b>uses</b><span style=\\\"color: navy\\\"> &quot;</span><a href=\\\"http://hl7.org/fhir/R5/observation.html\\\" title=\\\"Observation\\\">http://hl7.org/fhir/StructureDefinition/Observation</a><span style=\\\"color: navy\\\">&quot; </span><b>alias </b>Observation <b>as </b><b>source</b>\\r\\n<b>uses</b><span style=\\\"color: navy\\\"> &quot;</span><a href=\\\"StructureDefinition-Observation.html\\\" title=\\\"Observation OMOP Table\\\">http://hl7.org/fhir/uv/omop/StructureDefinition/Observation</a><span style=\\\"color: navy\\\">&quot; </span><b>alias </b>ObsTable <b>as </b><b>target</b>\\r\\n\\r\\n<b>group </b>Observe<span style=\\\"color: navy\\\">(</span><b>source</b> <span style=\\\"color: maroon\\\">src</span><span style=\\\"color: navy\\\"> : </span>Observation, <b>target</b> <span style=\\\"color: maroon\\\">tgt</span><span style=\\\"color: navy\\\"> : </span>ObsTable<span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\"> {\\r\\n</span>  src<b> where </b>('social-history' | 'imaging' | 'survey' | 'exam' | 'therapy' | 'activity' | 'procedure').supersetOf(Observation.category.coding.code)<b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    src.code<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      s.coding<b> as </b><span style=\\\"color: maroon\\\">sc</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>        sc.code<b> as </b><span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.observation_concept_id = <span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\">;</span>\\r\\n      <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span> <span style=\\\"color: navy\\\">// </span><span style=\\\"color: green\\\">src.id as id -&gt; tgt.observation_id = cast(id, &quot;integer&quot;);</span>\\r\\n    src.effective<span style=\\\"color: navy\\\"> : </span>dateTime<b> as </b><span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.observation_datetime = <span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\">, </span> tgt.observation_date = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'date'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">;</span> <span style=\\\"color: navy\\\">// </span><span style=\\\"color: green\\\">src.subject as s -&gt; tgt then {</span>\\r\\n    src.effective<span style=\\\"color: navy\\\"> : </span>instant<b> as </b><span style=\\\"color: maroon\\\">einst</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.observation_datetime = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">einst</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'dateTime'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">, </span> tgt.observation_date = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">einst</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'date'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">;</span>\\r\\n    src.effective<span style=\\\"color: navy\\\"> : </span>Period<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      s.start<b> as </b><span style=\\\"color: maroon\\\">ss</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.observation_datetime = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">ss</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'dateTime'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">, </span> tgt.observation_date = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">ss</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'date'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n    src.issued<b> as </b><span style=\\\"color: maroon\\\">s</span><b> where </b>(s.toDate != src.effectiveDate)<span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.observation_source_value = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'string'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">;</span>\\r\\n    src.value<span style=\\\"color: navy\\\"> : </span>Quantity<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      s.value<b> as </b><span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.value_as_number = <span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\">;</span>\\r\\n      s.unit<b> as </b><span style=\\\"color: maroon\\\">b</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.unit_concept_id = <span style=\\\"color: maroon\\\">b</span><span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span> <span style=\\\"color: navy\\\">// </span><span style=\\\"color: green\\\">src.performer as s -&gt; tgt then {</span>\\r\\n    src.value<span style=\\\"color: navy\\\"> : </span>CodeableConcept<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      s.coding<b> as </b><span style=\\\"color: maroon\\\">sc</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>        sc.code<b> as </b><span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.value_as_concept_id = <span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\">;</span>\\r\\n      <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n    src.value<span style=\\\"color: navy\\\"> : </span>string<b> as </b><span style=\\\"color: maroon\\\">b</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.value_as_string = <span style=\\\"color: maroon\\\">b</span><span style=\\\"color: navy\\\">;</span>\\r\\n    src.note<b> as </b><span style=\\\"color: maroon\\\">d</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.observation_source_value = <span style=\\\"color: maroon\\\">d</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span> <i>&quot;OnlyObs&quot;</i><span style=\\\"color: navy\\\">;</span>\\r\\n<span style=\\\"color: navy\\\">}\\r\\n\\r\\n</span></pre></div>\"},\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-wg\",\"valueCode\":\"brr\"},{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm\",\"valueInteger\":1,\"_valueInteger\":{\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-conformance-derivedFrom\",\"valueCanonical\":\"http://hl7.org/fhir/uv/omop/ImplementationGuide/hl7.fhir.uv.omop\"}]}},{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status\",\"valueCode\":\"informative\",\"_valueCode\":{\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-conformance-derivedFrom\",\"valueCanonical\":\"http://hl7.org/fhir/uv/omop/ImplementationGuide/hl7.fhir.uv.omop\"}]}}],\"url\":\"http://hl7.org/fhir/uv/omop/StructureMap/ObservationMap\",\"version\":\"1.0.0-ballot\",\"name\":\"ObservationMap\",\"title\":\"Mapping Observation resource to  Observation OMOP Domain\",\"status\":\"draft\",\"date\":\"2025-07-29T17:40:15+00:00\",\"publisher\":\"HL7 International / Biomedical Research and Regulation\",\"contact\":[{\"name\":\"HL7 International / Biomedical Research and Regulation\",\"telecom\":[{\"system\":\"url\",\"value\":\"http://www.hl7.org/Special/committees/rcrim\"}]}],\"description\":\"This mapping maps FHIR Observation instances that are NOT considered measurements to OMOP Observation Table objects.  Currently, this is done by considering the category code and mapping 'social-history', 'imaging', 'survey', 'exam', 'therapy', 'activity', and 'procedure' Observations.\",\"jurisdiction\":[{\"coding\":[{\"system\":\"http://unstats.un.org/unsd/methods/m49/m49.htm\",\"code\":\"001\",\"display\":\"World\"}]}],\"structure\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/Observation\",\"mode\":\"source\",\"alias\":\"Observation\"},{\"url\":\"http://hl7.org/fhir/uv/omop/StructureDefinition/Observation\",\"mode\":\"target\",\"alias\":\"ObsTable\"}],\"group\":[{\"name\":\"Observe\",\"input\":[{\"name\":\"src\",\"type\":\"Observation\",\"mode\":\"source\"},{\"name\":\"tgt\",\"type\":\"ObsTable\",\"mode\":\"target\"}],\"rule\":[{\"name\":\"mapObservationId\",\"documentation\":\"Generate a unique OMOP observation_id.\",\"source\":[{\"context\":\"src\",\"element\":\"id\",\"variable\":\"fhirId\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"observation_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"fhirId\"}]}]},{\"name\":\"mapPatientId\",\"source\":[{\"context\":\"src\",\"element\":\"subject.reference\",\"variable\":\"patRef\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"person_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"patRef\"}]}]},{\"name\":\"mapObservationTypeConceptId\",\"documentation\":\"Derive OMOP observation_type_concept_id based on FHIR AllergyIntolerance provenance.\",\"source\":[{\"context\":\"src\",\"element\":\"id\",\"variable\":\"id\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"observation_type_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"id\"}]}]},{\"name\":\"OnlyObs\",\"source\":[{\"context\":\"src\",\"condition\":\"('social-history' | 'imaging' | 'survey' | 'exam' | 'therapy' | 'activity' | 'procedure').supersetOf(Observation.category.coding.code)\"}],\"rule\":[{\"name\":\"code\",\"source\":[{\"context\":\"src\",\"element\":\"code\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"coding\",\"source\":[{\"context\":\"s\",\"element\":\"coding\",\"variable\":\"sc\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"code\",\"source\":[{\"context\":\"sc\",\"element\":\"code\",\"variable\":\"a\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"observation_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]}]}]}],\"documentation\":\"src.id as id -> tgt.observation_id = cast(id, \\\"integer\\\");\"},{\"name\":\"effectiveDateTime\",\"source\":[{\"context\":\"src\",\"type\":\"dateTime\",\"element\":\"effective\",\"variable\":\"a\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"observation_datetime\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]},{\"context\":\"tgt\",\"element\":\"observation_date\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"},{\"valueString\":\"date\"}]}],\"documentation\":\"src.subject as s -> tgt then {\"},{\"name\":\"effectiveInstant\",\"source\":[{\"context\":\"src\",\"type\":\"instant\",\"element\":\"effective\",\"variable\":\"einst\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"observation_datetime\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"einst\"},{\"valueString\":\"dateTime\"}]},{\"context\":\"tgt\",\"element\":\"observation_date\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"einst\"},{\"valueString\":\"date\"}]}]},{\"name\":\"effectivePeriod\",\"source\":[{\"context\":\"src\",\"type\":\"Period\",\"element\":\"effective\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"start\",\"source\":[{\"context\":\"s\",\"element\":\"start\",\"variable\":\"ss\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"observation_datetime\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"ss\"},{\"valueString\":\"dateTime\"}]},{\"context\":\"tgt\",\"element\":\"observation_date\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"ss\"},{\"valueString\":\"date\"}]}]}]},{\"name\":\"issued\",\"source\":[{\"context\":\"src\",\"element\":\"issued\",\"variable\":\"s\",\"condition\":\"(s.toDate != src.effectiveDate)\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"observation_source_value\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"s\"},{\"valueString\":\"string\"}]}]},{\"name\":\"valueQuantity\",\"source\":[{\"context\":\"src\",\"type\":\"Quantity\",\"element\":\"value\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"value\",\"source\":[{\"context\":\"s\",\"element\":\"value\",\"variable\":\"a\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"value_as_number\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]}]},{\"name\":\"unit\",\"source\":[{\"context\":\"s\",\"element\":\"unit\",\"variable\":\"b\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"unit_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"b\"}]}]}],\"documentation\":\"src.performer as s -> tgt then {\"},{\"name\":\"valueCodeableConcept\",\"source\":[{\"context\":\"src\",\"type\":\"CodeableConcept\",\"element\":\"value\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"coding\",\"source\":[{\"context\":\"s\",\"element\":\"coding\",\"variable\":\"sc\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"code\",\"source\":[{\"context\":\"sc\",\"element\":\"code\",\"variable\":\"a\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"value_as_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]}]}]}]},{\"name\":\"valueString\",\"source\":[{\"context\":\"src\",\"type\":\"string\",\"element\":\"value\",\"variable\":\"b\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"value_as_string\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"b\"}]}]},{\"name\":\"note\",\"source\":[{\"context\":\"src\",\"element\":\"note\",\"variable\":\"d\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"observation_source_value\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"d\"}]}]},{\"name\":\"note\",\"source\":[{\"context\":\"src\",\"element\":\"note\",\"variable\":\"d\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"observation_source_value\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"d\"}]}]}]}]}]}",
                "output_omop_data": ""
            },
            "type": "transform_fhir_data_node",
            "width": 353,
            "height": 213,
            "dragging": false,
            "position": {
                "x": 790,
                "y": 1860
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 790,
                "y": 1860
            }
        },
        {
            "id": "ab80716e-87b1-479c-bd4e-c95d43b35fe6",
            "data": {
                "id": "MedicationMap",
                "name": "transform_to_drug_exposure",
                "error": false,
                "dataframe": "MedicationStatement_df",
                "description": "Describe the task of node transform_fhir_data_node_3",
                "errorMessage": null,
                "structure_map": "{\"resourceType\":\"StructureMap\",\"id\":\"MedicationMap\",\"text\":{\"status\":\"generated\",\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"><p class=\\\"res-header-id\\\"><b>Generated Narrative: StructureMap MedicationMap</b></p><a name=\\\"MedicationMap\\\"> </a><a name=\\\"hcMedicationMap\\\"> </a><pre class=\\\"fml\\\">\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>url</b> = </span><span style=\\\"color: blue\\\">'http://hl7.org/fhir/uv/omop/StructureMap/MedicationMap'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>name</b> = </span><span style=\\\"color: blue\\\">'MedicationMap'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>title</b> = </span><span style=\\\"color: blue\\\">'Mapping MedicationStatement resource to DrugExposure OMOP Domain'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>status</b> = </span><span style=\\\"color: blue\\\">'draft'</span>\\r\\n\\r\\n<b>uses</b><span style=\\\"color: navy\\\"> &quot;</span><a href=\\\"http://hl7.org/fhir/R5/medicationstatement.html\\\" title=\\\"MedicationStatement\\\">http://hl7.org/fhir/StructureDefinition/MedicationStatement</a><span style=\\\"color: navy\\\">&quot; </span><b>alias </b>MedState <b>as </b><b>source</b>\\r\\n<b>uses</b><span style=\\\"color: navy\\\"> &quot;</span><a href=\\\"StructureDefinition-DrugExposure.html\\\" title=\\\"Drug Exposure OMOP Table\\\">http://hl7.org/fhir/uv/omop/StructureDefinition/DrugExposure</a><span style=\\\"color: navy\\\">&quot; </span><b>alias </b>DrugExpTable <b>as </b><b>target</b>\\r\\n\\r\\n<b>group </b>MedExposure<span style=\\\"color: navy\\\">(</span><b>source</b> <span style=\\\"color: maroon\\\">src</span><span style=\\\"color: navy\\\"> : </span>MedState, <b>target</b> <span style=\\\"color: maroon\\\">tgt</span><span style=\\\"color: navy\\\"> : </span>DrugExpTable<span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\"> {\\r\\n</span>  src.medication<span style=\\\"color: navy\\\"> : </span>CodeableReference<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    s.concept<b> as </b><span style=\\\"color: maroon\\\">scs</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      scs.coding<b> as </b><span style=\\\"color: maroon\\\">sc</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>        sc.code<b> as </b><span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.drug_concept_id = <span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\">;</span>\\r\\n      <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span> <span style=\\\"color: navy\\\">// </span><span style=\\\"color: green\\\">src.id as id -&gt; tgt.drug_exposure_id = cast(id, &quot;integer&quot;);</span>\\r\\n  src.effective<span style=\\\"color: navy\\\"> : </span>dateTime<b> as </b><span style=\\\"color: maroon\\\">edt</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.drug_exposure_start_datetime = <span style=\\\"color: maroon\\\">edt</span><span style=\\\"color: navy\\\">, </span> tgt.drug_exposure_start_date = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">edt</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'date'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">;</span>\\r\\n  src.effective<span style=\\\"color: navy\\\"> : </span>Period<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    s.start<b> as </b><span style=\\\"color: maroon\\\">fps</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.drug_exposure_start_datetime = <span style=\\\"color: maroon\\\">fps</span><span style=\\\"color: navy\\\">, </span> tgt.drug_exposure_start_date = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">fps</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'date'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  src.effective<span style=\\\"color: navy\\\"> : </span>Period<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    s.end<b> as </b><span style=\\\"color: maroon\\\">fpe</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.drug_exposure_end_datetime = <span style=\\\"color: maroon\\\">fpe</span><span style=\\\"color: navy\\\">, </span> tgt.drug_exposure_end_date = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">fps</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'date'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  src.effective<span style=\\\"color: navy\\\"> : </span>Period<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    s.end<b> as </b><span style=\\\"color: maroon\\\">fpe</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.verbatim_end_date = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">fps</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'date'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  src.category<span style=\\\"color: navy\\\"> : </span>CodeableConcept<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    s.coding<b> as </b><span style=\\\"color: maroon\\\">sc</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      sc.code<b> as </b><span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.drug_type_concept_id = <span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  src.reason<span style=\\\"color: navy\\\"> : </span>CodeableReference<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    s.concept<b> as </b><span style=\\\"color: maroon\\\">scs</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      scs.coding<b> as </b><span style=\\\"color: maroon\\\">sc</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>        sc.code<b> as </b><span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.stop_reason = <span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\">;</span>\\r\\n      <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n<span style=\\\"color: navy\\\">}\\r\\n\\r\\n</span></pre></div>\"},\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-wg\",\"valueCode\":\"brr\"},{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm\",\"valueInteger\":1,\"_valueInteger\":{\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-conformance-derivedFrom\",\"valueCanonical\":\"http://hl7.org/fhir/uv/omop/ImplementationGuide/hl7.fhir.uv.omop\"}]}},{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status\",\"valueCode\":\"informative\",\"_valueCode\":{\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-conformance-derivedFrom\",\"valueCanonical\":\"http://hl7.org/fhir/uv/omop/ImplementationGuide/hl7.fhir.uv.omop\"}]}}],\"url\":\"http://hl7.org/fhir/uv/omop/StructureMap/MedicationMap\",\"version\":\"1.0.0-ballot\",\"name\":\"MedicationMap\",\"title\":\"Mapping MedicationStatement resource to DrugExposure OMOP Domain\",\"status\":\"draft\",\"date\":\"2025-07-29T17:40:15+00:00\",\"publisher\":\"HL7 International / Biomedical Research and Regulation\",\"contact\":[{\"name\":\"HL7 International / Biomedical Research and Regulation\",\"telecom\":[{\"system\":\"url\",\"value\":\"http://www.hl7.org/Special/committees/rcrim\"}]}],\"description\":\"This mapping maps FHIR MedicationStatement instances to OMOP Drug Exposure Table objects.  NOTE: It does not map FHIR MedicationRequest instances although there is a discussion of those instances in the notes.\",\"jurisdiction\":[{\"coding\":[{\"system\":\"http://unstats.un.org/unsd/methods/m49/m49.htm\",\"code\":\"001\",\"display\":\"World\"}]}],\"structure\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/MedicationStatement\",\"mode\":\"source\",\"alias\":\"MedState\"},{\"url\":\"http://hl7.org/fhir/uv/omop/StructureDefinition/DrugExposure\",\"mode\":\"target\",\"alias\":\"DrugExpTable\"}],\"group\":[{\"name\":\"MedExposure\",\"input\":[{\"name\":\"src\",\"type\":\"MedState\",\"mode\":\"source\"},{\"name\":\"tgt\",\"type\":\"DrugExpTable\",\"mode\":\"target\"}],\"rule\":[{\"name\":\"id\",\"source\":[{\"context\":\"src\",\"element\":\"id\",\"variable\":\"did\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"drug_exposure_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"did\"}]}]},{\"name\":\"mapPatientId\",\"source\":[{\"context\":\"src\",\"element\":\"subject.reference\",\"variable\":\"patientRefId\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"person_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"patientRefId\"}]}]},{\"name\":\"drugTypeConceptId\",\"source\":[{\"context\":\"src\",\"element\":\"id\",\"variable\":\"dtci\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"drug_type_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueInteger\":581452}]}]},{\"name\":\"effectiveDateTime\",\"source\":[{\"context\":\"src\",\"type\":\"dateTime\",\"element\":\"effective\",\"variable\":\"edt\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"drug_exposure_start_datetime\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"edt\"}]},{\"context\":\"tgt\",\"element\":\"drug_exposure_start_date\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"edt\"},{\"valueString\":\"date\"}]}]},{\"name\":\"effectivePeriod\",\"source\":[{\"context\":\"src\",\"type\":\"Period\",\"element\":\"effectivePeriod\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"end\",\"source\":[{\"context\":\"s\",\"element\":\"end\",\"variable\":\"fpe\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"drug_exposure_end_datetime\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"fpe\"}]},{\"context\":\"tgt\",\"element\":\"drug_exposure_end_date\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"fpe\"},{\"valueString\":\"date\"}]}]}]},{\"name\":\"effectivePeriod\",\"source\":[{\"context\":\"src\",\"type\":\"Period\",\"element\":\"effective\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"end\",\"source\":[{\"context\":\"s\",\"element\":\"end\",\"variable\":\"fpe\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"verbatim_end_date\",\"transform\":\"cast\",\"parameter\":[{\"valueId\":\"fps\"},{\"valueString\":\"date\"}]}]}]},{\"name\":\"categoryCodeableConcept\",\"source\":[{\"context\":\"src\",\"type\":\"CodeableConcept\",\"element\":\"category\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"coding\",\"source\":[{\"context\":\"s\",\"element\":\"coding\",\"variable\":\"sc\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"code\",\"source\":[{\"context\":\"sc\",\"element\":\"code\",\"variable\":\"a\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"drug_type_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]}]}]}]},{\"name\":\"reasonCodeableReference\",\"source\":[{\"context\":\"src\",\"element\":\"reasonCode\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"coding\",\"source\":[{\"context\":\"scs\",\"element\":\"coding\",\"variable\":\"sc\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"code\",\"source\":[{\"context\":\"sc\",\"element\":\"code\",\"variable\":\"a\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"stop_reason\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]}]}]}]},{\"name\":\"medicationCodeableReference\",\"source\":[{\"context\":\"src\",\"element\":\"medicationCodeableConcept\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"coding\",\"source\":[{\"context\":\"s\",\"element\":\"coding\",\"variable\":\"sc\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"code\",\"source\":[{\"context\":\"sc\",\"element\":\"code\",\"variable\":\"a\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"drug_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]}]}]}],\"documentation\":\"src.id as id -> tgt.drug_exposure_id = cast(id, \\\"integer\\\");\"}]}]}",
                "output_omop_data": ""
            },
            "type": "transform_fhir_data_node",
            "width": 353,
            "height": 213,
            "dragging": false,
            "position": {
                "x": 770,
                "y": 1590
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 770,
                "y": 1590
            }
        },
        {
            "id": "b7f82a01-dd6e-4b76-bd72-53d069da2e72",
            "data": {
                "id": "MeasurementMap",
                "name": "transform_to_measurement",
                "error": false,
                "dataframe": "Observation_df",
                "description": "Describe the task of node transform_fhir_data_node_4",
                "errorMessage": null,
                "structure_map": "{\"resourceType\":\"StructureMap\",\"id\":\"MeasurementMap\",\"text\":{\"status\":\"generated\",\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"><p class=\\\"res-header-id\\\"><b>Generated Narrative: StructureMap MeasurementMap</b></p><a name=\\\"MeasurementMap\\\"> </a><a name=\\\"hcMeasurementMap\\\"> </a><pre class=\\\"fml\\\">\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>url</b> = </span><span style=\\\"color: blue\\\">'http://hl7.org/fhir/uv/omop/StructureMap/MeasurementMap'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>name</b> = </span><span style=\\\"color: blue\\\">'MeasurementMap'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>title</b> = </span><span style=\\\"color: blue\\\">'Mapping Observation resource to Measurement  OMOP Domain'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>status</b> = </span><span style=\\\"color: blue\\\">'draft'</span>\\r\\n\\r\\n<b>uses</b><span style=\\\"color: navy\\\"> &quot;</span><a href=\\\"http://hl7.org/fhir/R5/observation.html\\\" title=\\\"Observation\\\">http://hl7.org/fhir/StructureDefinition/Observation</a><span style=\\\"color: navy\\\">&quot; </span><b>alias </b>Observation <b>as </b><b>source</b>\\r\\n<b>uses</b><span style=\\\"color: navy\\\"> &quot;</span><a href=\\\"StructureDefinition-Measurement.html\\\" title=\\\"Measurement OMOP Table\\\">http://hl7.org/fhir/uv/omop/StructureDefinition/Measurement</a><span style=\\\"color: navy\\\">&quot; </span><b>alias </b>MeasureTable <b>as </b><b>target</b>\\r\\n\\r\\n<b>group </b>Measures<span style=\\\"color: navy\\\">(</span><b>source</b> <span style=\\\"color: maroon\\\">src</span><span style=\\\"color: navy\\\"> : </span>Observation, <b>target</b> <span style=\\\"color: maroon\\\">tgt</span><span style=\\\"color: navy\\\"> : </span>MeasureTable<span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\"> {\\r\\n</span>  src<b> where </b>('vital-signs' | 'laboratory').supersetOf(Observation.category.coding.code)<b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    src.code<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      s.coding<b> as </b><span style=\\\"color: maroon\\\">sc</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>        sc.code<b> as </b><span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.measurement_concept_id = <span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\">;</span>\\r\\n      <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span> <span style=\\\"color: navy\\\">// </span><span style=\\\"color: green\\\">src.id as id -&gt; tgt.measurement_id = cast(id, &quot;integer&quot;);</span>\\r\\n    src.effective<span style=\\\"color: navy\\\"> : </span>dateTime<b> as </b><span style=\\\"color: maroon\\\">edt</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.measurement_datetime = <span style=\\\"color: maroon\\\">edt</span><span style=\\\"color: navy\\\">, </span> tgt.measurement_date = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">edt</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'date'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">;</span> <span style=\\\"color: navy\\\">// </span><span style=\\\"color: green\\\">src.subject as s -&gt; tgt then {</span>\\r\\n    src.effective<span style=\\\"color: navy\\\"> : </span>instant<b> as </b><span style=\\\"color: maroon\\\">einst</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.measurement_datetime = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">einst</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'dateTime'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">, </span> tgt.measurement_date = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">einst</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'date'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">;</span>\\r\\n    src.effective<span style=\\\"color: navy\\\"> : </span>Period<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      s.start<b> as </b><span style=\\\"color: maroon\\\">eps</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.measurement_datetime = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">eps</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'dateTime'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">, </span> tgt.measurement_date = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">eps</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'date'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n    src.issued<b> as </b><span style=\\\"color: maroon\\\">s</span><b> where </b>(src.issued.toDate != src.effectiveDateTime)<span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.measurement_source_value = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'string'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">;</span>\\r\\n    src.value<span style=\\\"color: navy\\\"> : </span>Quantity<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      s.value<b> as </b><span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.value_as_number = <span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\">;</span>\\r\\n      s.unit<b> as </b><span style=\\\"color: maroon\\\">b</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.unit_concept_id = <span style=\\\"color: maroon\\\">b</span><span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span> <span style=\\\"color: navy\\\">// </span><span style=\\\"color: green\\\">src.performer as s -&gt; tgt then {</span>\\r\\n    src.value<span style=\\\"color: navy\\\"> : </span>CodeableConcept<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      s.coding<b> as </b><span style=\\\"color: maroon\\\">sc</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>        sc.code<b> as </b><span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.value_as_concept_id = <span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\">;</span>\\r\\n      <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n    src.value<span style=\\\"color: navy\\\"> : </span>string<b> as </b><span style=\\\"color: maroon\\\">b</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.value_source_value = <span style=\\\"color: maroon\\\">b</span><span style=\\\"color: navy\\\">;</span>\\r\\n    src.interpretation<b> as </b><span style=\\\"color: maroon\\\">c</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.value_as_concept_id = <span style=\\\"color: maroon\\\">c</span><span style=\\\"color: navy\\\">;</span>\\r\\n    src.note<b> as </b><span style=\\\"color: maroon\\\">d</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.measurement_source_value = <span style=\\\"color: maroon\\\">d</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span> <i>&quot;OnlyMeasures&quot;</i><span style=\\\"color: navy\\\">;</span>\\r\\n<span style=\\\"color: navy\\\">}\\r\\n\\r\\n</span></pre></div>\"},\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-wg\",\"valueCode\":\"brr\"},{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm\",\"valueInteger\":1,\"_valueInteger\":{\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-conformance-derivedFrom\",\"valueCanonical\":\"http://hl7.org/fhir/uv/omop/ImplementationGuide/hl7.fhir.uv.omop\"}]}},{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status\",\"valueCode\":\"informative\",\"_valueCode\":{\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-conformance-derivedFrom\",\"valueCanonical\":\"http://hl7.org/fhir/uv/omop/ImplementationGuide/hl7.fhir.uv.omop\"}]}}],\"url\":\"http://hl7.org/fhir/uv/omop/StructureMap/MeasurementMap\",\"version\":\"1.0.0-ballot\",\"name\":\"MeasurementMap\",\"title\":\"Mapping Observation resource to Measurement  OMOP Domain\",\"status\":\"draft\",\"date\":\"2025-07-29T17:40:15+00:00\",\"publisher\":\"HL7 International / Biomedical Research and Regulation\",\"contact\":[{\"name\":\"HL7 International / Biomedical Research and Regulation\",\"telecom\":[{\"system\":\"url\",\"value\":\"http://www.hl7.org/Special/committees/rcrim\"}]}],\"description\":\"This mapping maps FHIR Observation instances that are considered measurements to OMOP Measurement Table objects.  Currently, this is done by considering the category code and mapping 'vital-signs' and 'laboratory' Observations.\",\"jurisdiction\":[{\"coding\":[{\"system\":\"http://unstats.un.org/unsd/methods/m49/m49.htm\",\"code\":\"001\",\"display\":\"World\"}]}],\"structure\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/Observation\",\"mode\":\"source\",\"alias\":\"Observation\"},{\"url\":\"http://hl7.org/fhir/uv/omop/StructureDefinition/Measurement\",\"mode\":\"target\",\"alias\":\"MeasureTable\"}],\"group\":[{\"name\":\"Measures\",\"input\":[{\"name\":\"src\",\"type\":\"Observation\",\"mode\":\"source\"},{\"name\":\"tgt\",\"type\":\"MeasureTable\",\"mode\":\"target\"}],\"rule\":[{\"name\":\"id\",\"source\":[{\"context\":\"src\",\"element\":\"id\",\"variable\":\"mid\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"measurement_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"mid\"}]}]},{\"name\":\"mapPatientId\",\"source\":[{\"context\":\"src\",\"element\":\"subject.reference\",\"variable\":\"patientRefId\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"person_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"patientRefId\"}]}]},{\"name\":\"OnlyMeasures\",\"source\":[{\"context\":\"src\",\"condition\":\"('vital-signs' | 'laboratory').supersetOf(Observation.category.coding.code)\"}],\"rule\":[{\"name\":\"code\",\"source\":[{\"context\":\"src\",\"element\":\"code\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"coding\",\"source\":[{\"context\":\"s\",\"element\":\"coding\",\"variable\":\"sc\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"code\",\"source\":[{\"context\":\"sc\",\"element\":\"code\",\"variable\":\"a\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"measurement_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]}]}]}],\"documentation\":\"src.id as id -> tgt.measurement_id = cast(id, \\\"integer\\\");\"},{\"name\":\"effectiveDateTime\",\"source\":[{\"context\":\"src\",\"type\":\"dateTime\",\"element\":\"effective\",\"variable\":\"edt\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"measurement_datetime\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"edt\"}]},{\"context\":\"tgt\",\"element\":\"measurement_date\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"edt\"},{\"valueString\":\"date\"}]}],\"documentation\":\"src.subject as s -> tgt then {\"},{\"name\":\"effectiveInstant\",\"source\":[{\"context\":\"src\",\"type\":\"instant\",\"element\":\"effective\",\"variable\":\"einst\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"measurement_datetime\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"einst\"},{\"valueString\":\"dateTime\"}]},{\"context\":\"tgt\",\"element\":\"measurement_date\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"einst\"},{\"valueString\":\"date\"}]}]},{\"name\":\"effectivePeriod\",\"source\":[{\"context\":\"src\",\"type\":\"Period\",\"element\":\"effective\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"start\",\"source\":[{\"context\":\"s\",\"element\":\"start\",\"variable\":\"eps\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"measurement_datetime\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"eps\"},{\"valueString\":\"dateTime\"}]},{\"context\":\"tgt\",\"element\":\"measurement_date\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"eps\"},{\"valueString\":\"date\"}]}]}]},{\"name\":\"issued\",\"source\":[{\"context\":\"src\",\"element\":\"issued\",\"variable\":\"s\",\"condition\":\"(src.issued.toDate != src.effectiveDateTime)\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"measurement_source_value\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"s\"},{\"valueString\":\"string\"}]}]},{\"name\":\"valueQuantity\",\"source\":[{\"context\":\"src\",\"type\":\"Quantity\",\"element\":\"value\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"value\",\"source\":[{\"context\":\"s\",\"element\":\"value\",\"variable\":\"a\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"value_as_number\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]}]},{\"name\":\"unit\",\"source\":[{\"context\":\"s\",\"element\":\"unit\",\"variable\":\"b\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"unit_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"b\"}]}]}],\"documentation\":\"src.performer as s -> tgt then {\"},{\"name\":\"valueCodeableConcept\",\"source\":[{\"context\":\"src\",\"type\":\"CodeableConcept\",\"element\":\"value\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"coding\",\"source\":[{\"context\":\"s\",\"element\":\"coding\",\"variable\":\"sc\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"code\",\"source\":[{\"context\":\"sc\",\"element\":\"code\",\"variable\":\"a\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"value_as_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]}]}]}]},{\"name\":\"measurement_type_concept_id\",\"source\":[{\"context\":\"src\",\"element\":\"id\",\"variable\":\"measurement_type_concept_id\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"measurement_type_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueInteger\":581458}]}]},{\"name\":\"valueString\",\"source\":[{\"context\":\"src\",\"type\":\"string\",\"element\":\"value\",\"variable\":\"b\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"value_source_value\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"b\"}]}]},{\"name\":\"interpretation\",\"source\":[{\"context\":\"src\",\"element\":\"interpretation\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"coding\",\"source\":[{\"context\":\"s\",\"element\":\"coding\",\"variable\":\"sc\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"code\",\"source\":[{\"context\":\"sc\",\"element\":\"code\",\"variable\":\"a\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"value_as_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]}]}]}]},{\"name\":\"note\",\"source\":[{\"context\":\"src\",\"element\":\"note\",\"variable\":\"d\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"measurement_source_value\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"d\"}]}]}]}]}]}",
                "output_omop_data": ""
            },
            "type": "transform_fhir_data_node",
            "width": 353,
            "height": 213,
            "dragging": false,
            "position": {
                "x": 780,
                "y": 1300
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 780,
                "y": 1300
            }
        },
        {
            "id": "4578bc25-72aa-4c34-8693-a820dad6527b",
            "data": {
                "id": "ImmunizationMap",
                "name": "transform_to_drug_exposure",
                "dataframe": "Immunization_df",
                "description": "Describe the task of node transform_fhir_data_node_5",
                "structure_map": "{\"resourceType\":\"StructureMap\",\"id\":\"ImmunizationMap\",\"text\":{\"status\":\"generated\",\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"><p class=\\\"res-header-id\\\"><b>Generated Narrative: StructureMap ImmunizationMap</b></p><a name=\\\"ImmunizationMap\\\"> </a><a name=\\\"hcImmunizationMap\\\"> </a><pre class=\\\"fml\\\">\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>url</b> = </span><span style=\\\"color: blue\\\">'http://hl7.org/fhir/uv/omop/StructureMap/ImmunizationMap'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>name</b> = </span><span style=\\\"color: blue\\\">'ImmunizationMap'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>title</b> = </span><span style=\\\"color: blue\\\">'Mapping Immunization resource to Drug Exposure OMOP Domain'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>status</b> = </span><span style=\\\"color: blue\\\">'draft'</span>\\r\\n\\r\\n<b>uses</b><span style=\\\"color: navy\\\"> &quot;</span><a href=\\\"http://hl7.org/fhir/R5/immunization.html\\\" title=\\\"Immunization\\\">http://hl7.org/fhir/StructureDefinition/Immunization</a><span style=\\\"color: navy\\\">&quot; </span><b>alias </b>Immunization <b>as </b><b>source</b>\\r\\n<b>uses</b><span style=\\\"color: navy\\\"> &quot;</span><a href=\\\"StructureDefinition-DrugExposure.html\\\" title=\\\"Drug Exposure OMOP Table\\\">http://hl7.org/fhir/uv/omop/StructureDefinition/DrugExposure</a><span style=\\\"color: navy\\\">&quot; </span><b>alias </b>DrugExposureTable <b>as </b><b>target</b>\\r\\n\\r\\n<b>group </b>DrugExposure<span style=\\\"color: navy\\\">(</span><b>source</b> <span style=\\\"color: maroon\\\">src</span><span style=\\\"color: navy\\\"> : </span>Immunization, <b>target</b> <span style=\\\"color: maroon\\\">tgt</span><span style=\\\"color: navy\\\"> : </span>DrugExposureTable<span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\"> {\\r\\n</span>  src.vaccineCode<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    s.coding<b> as </b><span style=\\\"color: maroon\\\">sc</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      sc.code<span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.drug_concept_id<span style=\\\"color: navy\\\">, </span> tgt.drug_source_value<span style=\\\"color: navy\\\">, </span> tgt.drug_source_concept_id<span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span> <span style=\\\"color: navy\\\">// </span><span style=\\\"color: green\\\">src.id as id -&gt; tgt.drug_exposure_id = cast(id, &quot;integer&quot;);</span>\\r\\n  src.doseQuantity<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    s.value<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.quantity = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'decimal'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">;</span>\\r\\n    s.code<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.dose_unit_source_value = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'string'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span> <span style=\\\"color: navy\\\">// </span><span style=\\\"color: green\\\">src.patient as s -&gt; tgt then {</span>\\r\\n  src.route<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    s.text<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.route_source_value = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'string'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">;</span>\\r\\n    s.coding<b> as </b><span style=\\\"color: maroon\\\">sc</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      sc.code<span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.route_concept_id<span style=\\\"color: navy\\\">, </span> tgt.route_source_value<span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  src.occurrence<span style=\\\"color: navy\\\"> : </span>dateTime<b> as </b><span style=\\\"color: maroon\\\">odt</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.drug_exposure_start_date = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">odt</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'date'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">, </span> tgt.drug_exposure_start_datetime = <span style=\\\"color: maroon\\\">odt</span><span style=\\\"color: navy\\\">, </span> tgt.drug_exposure_end_date = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">odt</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'date'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">, </span> tgt.drug_exposure_end_datetime = <span style=\\\"color: maroon\\\">odt</span><span style=\\\"color: navy\\\">;</span>\\r\\n  src.lotNumber<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.lot_number = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'string'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">;</span> <span style=\\\"color: navy\\\">// </span><span style=\\\"color: green\\\">src.encounter as s -&gt; tgt then {</span>\\r\\n<span style=\\\"color: navy\\\">}\\r\\n\\r\\n</span></pre></div>\"},\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-wg\",\"valueCode\":\"brr\"},{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm\",\"valueInteger\":1,\"_valueInteger\":{\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-conformance-derivedFrom\",\"valueCanonical\":\"http://hl7.org/fhir/uv/omop/ImplementationGuide/hl7.fhir.uv.omop\"}]}},{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status\",\"valueCode\":\"informative\",\"_valueCode\":{\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-conformance-derivedFrom\",\"valueCanonical\":\"http://hl7.org/fhir/uv/omop/ImplementationGuide/hl7.fhir.uv.omop\"}]}}],\"url\":\"http://hl7.org/fhir/uv/omop/StructureMap/ImmunizationMap\",\"version\":\"1.0.0-ballot\",\"name\":\"ImmunizationMap\",\"title\":\"Mapping Immunization resource to Drug Exposure OMOP Domain\",\"status\":\"draft\",\"date\":\"2025-07-29T17:40:15+00:00\",\"publisher\":\"HL7 International / Biomedical Research and Regulation\",\"contact\":[{\"name\":\"HL7 International / Biomedical Research and Regulation\",\"telecom\":[{\"system\":\"url\",\"value\":\"http://www.hl7.org/Special/committees/rcrim\"}]}],\"description\":\"This mapping maps FHIR Immunization instances to OMOP Drug Exposure Table objects.\",\"jurisdiction\":[{\"coding\":[{\"system\":\"http://unstats.un.org/unsd/methods/m49/m49.htm\",\"code\":\"001\",\"display\":\"World\"}]}],\"structure\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/Immunization\",\"mode\":\"source\",\"alias\":\"Immunization\"},{\"url\":\"http://hl7.org/fhir/uv/omop/StructureDefinition/DrugExposure\",\"mode\":\"target\",\"alias\":\"DrugExposureTable\"}],\"group\":[{\"name\":\"DrugExposure\",\"input\":[{\"name\":\"src\",\"type\":\"Immunization\",\"mode\":\"source\"},{\"name\":\"tgt\",\"type\":\"DrugExposureTable\",\"mode\":\"target\"}],\"rule\":[{\"name\":\"id\",\"source\":[{\"context\":\"src\",\"element\":\"id\",\"variable\":\"did\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"drug_exposure_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"did\"}]}]},{\"name\":\"mapPatientId\",\"source\":[{\"context\":\"src\",\"element\":\"patient.reference\",\"variable\":\"patientRefId\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"person_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"patientRefId\"}]}]},{\"name\":\"drugTypeConceptId\",\"source\":[{\"context\":\"src\",\"element\":\"id\",\"variable\":\"dtci\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"drug_type_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueInteger\":581452}]}]},{\"name\":\"vaccineCode\",\"source\":[{\"context\":\"src\",\"element\":\"vaccineCode\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"coding\",\"source\":[{\"context\":\"s\",\"element\":\"coding\",\"variable\":\"sc\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"code\",\"source\":[{\"context\":\"sc\",\"element\":\"code\",\"variable\":\"a\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"drug_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]},{\"context\":\"tgt\",\"element\":\"drug_source_value\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]},{\"context\":\"tgt\",\"element\":\"drug_source_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]}]}]}],\"documentation\":\"src.id as id -> tgt.drug_exposure_id = cast(id, \\\"integer\\\");\"},{\"name\":\"doseQuantity\",\"source\":[{\"context\":\"src\",\"element\":\"doseQuantity\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"value\",\"source\":[{\"context\":\"s\",\"element\":\"value\",\"variable\":\"s\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"quantity\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"s\"},{\"valueString\":\"decimal\"}]}]},{\"name\":\"code\",\"source\":[{\"context\":\"s\",\"element\":\"code\",\"variable\":\"s\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"dose_unit_source_value\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"s\"},{\"valueString\":\"string\"}]}]}],\"documentation\":\"src.patient as s -> tgt then {\"},{\"name\":\"route\",\"source\":[{\"context\":\"src\",\"element\":\"route\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"text\",\"source\":[{\"context\":\"s\",\"element\":\"text\",\"variable\":\"s\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"route_source_value\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"s\"},{\"valueString\":\"string\"}]}]},{\"name\":\"coding\",\"source\":[{\"context\":\"s\",\"element\":\"coding\",\"variable\":\"sc\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"code\",\"source\":[{\"context\":\"sc\",\"element\":\"code\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"route_concept_id\"},{\"context\":\"tgt\",\"element\":\"route_source_value\"}]}]}]},{\"name\":\"occurrenceDateTime\",\"source\":[{\"context\":\"src\",\"type\":\"dateTime\",\"element\":\"occurrence\",\"variable\":\"odt\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"drug_exposure_start_date\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"odt\"},{\"valueString\":\"date\"}]},{\"context\":\"tgt\",\"element\":\"drug_exposure_start_datetime\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"odt\"}]},{\"context\":\"tgt\",\"element\":\"drug_exposure_end_date\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"odt\"},{\"valueString\":\"date\"}]},{\"context\":\"tgt\",\"element\":\"drug_exposure_end_datetime\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"odt\"}]}]},{\"name\":\"lotNumber\",\"source\":[{\"context\":\"src\",\"element\":\"lotNumber\",\"variable\":\"s\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"lot_number\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"s\"},{\"valueString\":\"string\"}]}],\"documentation\":\"src.encounter as s -> tgt then {\"}]}]}",
                "output_omop_data": ""
            },
            "type": "transform_fhir_data_node",
            "width": 353,
            "height": 213,
            "dragging": false,
            "position": {
                "x": 790,
                "y": 1020
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 790,
                "y": 1020
            }
        },
        {
            "id": "369f82ce-d9bb-40dd-aa10-e6acf3849bc5",
            "data": {
                "id": "EncounterVisitMap",
                "name": "transform_to_visit_occurrence",
                "error": false,
                "dataframe": "Encounter_df",
                "description": "Describe the task of node transform_fhir_data_node_6",
                "errorMessage": null,
                "structure_map": "{\"resourceType\":\"StructureMap\",\"id\":\"EncounterVisitMap\",\"text\":{\"status\":\"generated\",\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"><p class=\\\"res-header-id\\\"><b>Generated Narrative: StructureMap EncounterVisitMap</b></p><a name=\\\"EncounterVisitMap\\\"> </a><a name=\\\"hcEncounterVisitMap\\\"> </a><pre class=\\\"fml\\\">\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>url</b> = </span><span style=\\\"color: blue\\\">'http://hl7.org/fhir/uv/omop/StructureMap/EncounterVisitMap'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>name</b> = </span><span style=\\\"color: blue\\\">'EncounterVisitMap'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>title</b> = </span><span style=\\\"color: blue\\\">'Mapping Encounter resource to VisitOccurrence OMOP Domain'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>status</b> = </span><span style=\\\"color: blue\\\">'draft'</span>\\r\\n\\r\\n<b>uses</b><span style=\\\"color: navy\\\"> &quot;</span><a href=\\\"http://hl7.org/fhir/R5/encounter.html\\\" title=\\\"Encounter\\\">http://hl7.org/fhir/StructureDefinition/Encounter</a><span style=\\\"color: navy\\\">&quot; </span><b>alias </b>Encounter <b>as </b><b>source</b>\\r\\n<b>uses</b><span style=\\\"color: navy\\\"> &quot;</span><a href=\\\"StructureDefinition-VisitOccurrence.html\\\" title=\\\"Visit Occurrence OMOP Table\\\">http://hl7.org/fhir/uv/omop/StructureDefinition/VisitOccurrence</a><span style=\\\"color: navy\\\">&quot; </span><b>alias </b>VisitTable <b>as </b><b>target</b>\\r\\n\\r\\n<b>group </b>VisitOccurrence<span style=\\\"color: navy\\\">(</span><b>source</b> <span style=\\\"color: maroon\\\">src</span><span style=\\\"color: navy\\\"> : </span>Encounter, <b>target</b> <span style=\\\"color: maroon\\\">tgt</span><span style=\\\"color: navy\\\"> : </span>VisitTable<span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\"> {\\r\\n</span>  src.class<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    s.coding<b> as </b><span style=\\\"color: maroon\\\">sc</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      sc.code<b> as </b><span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.visit_concept_id = <span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\">, </span> tgt.visit_source_value = <span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\">, </span> tgt.visit_source_concept_id = <span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span> <span style=\\\"color: navy\\\">// </span><span style=\\\"color: green\\\">src.id as id -&gt; tgt.visit_occurrence_id = cast(id, &quot;integer&quot;);</span>\\r\\n  src.actualPeriod<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    s.start<b> as </b><span style=\\\"color: maroon\\\">std</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.visit_start_date = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">std</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'date'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">, </span> tgt.visit_start_datetime = <span style=\\\"color: maroon\\\">std</span><span style=\\\"color: navy\\\">;</span>\\r\\n    s.end<b> as </b><span style=\\\"color: maroon\\\">ed</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.visit_end_date = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">ed</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'date'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">, </span> tgt.visit_end_datetime = <span style=\\\"color: maroon\\\">ed</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  src.admission<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    s.admitSource<b> as </b><span style=\\\"color: maroon\\\">sa</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      sa.coding<b> as </b><span style=\\\"color: maroon\\\">sc</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>        sc.code<b> as </b><span style=\\\"color: maroon\\\">code</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.admitted_from_concept_id = <span style=\\\"color: maroon\\\">code</span><span style=\\\"color: navy\\\">, </span> tgt.admitted_from_source_value = <span style=\\\"color: maroon\\\">code</span><span style=\\\"color: navy\\\">;</span>\\r\\n      <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n    s.dischargeDisposition<b> as </b><span style=\\\"color: maroon\\\">sd</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      sd.coding<b> as </b><span style=\\\"color: maroon\\\">sc</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>        sc.code<b> as </b><span style=\\\"color: maroon\\\">code</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.discharged_to_concept_id = <span style=\\\"color: maroon\\\">code</span><span style=\\\"color: navy\\\">, </span> tgt.discharged_to_source_value = <span style=\\\"color: maroon\\\">code</span><span style=\\\"color: navy\\\">;</span>\\r\\n      <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n<span style=\\\"color: navy\\\">}\\r\\n\\r\\n</span></pre></div>\"},\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-wg\",\"valueCode\":\"brr\"},{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm\",\"valueInteger\":1,\"_valueInteger\":{\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-conformance-derivedFrom\",\"valueCanonical\":\"http://hl7.org/fhir/uv/omop/ImplementationGuide/hl7.fhir.uv.omop\"}]}},{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status\",\"valueCode\":\"informative\",\"_valueCode\":{\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-conformance-derivedFrom\",\"valueCanonical\":\"http://hl7.org/fhir/uv/omop/ImplementationGuide/hl7.fhir.uv.omop\"}]}}],\"url\":\"http://hl7.org/fhir/uv/omop/StructureMap/EncounterVisitMap\",\"version\":\"1.0.0-ballot\",\"name\":\"EncounterVisitMap\",\"title\":\"Mapping Encounter resource to VisitOccurrence OMOP Domain\",\"status\":\"draft\",\"date\":\"2025-07-29T17:40:15+00:00\",\"publisher\":\"HL7 International / Biomedical Research and Regulation\",\"contact\":[{\"name\":\"HL7 International / Biomedical Research and Regulation\",\"telecom\":[{\"system\":\"url\",\"value\":\"http://www.hl7.org/Special/committees/rcrim\"}]}],\"description\":\"This mapping maps FHIR Encounter instances to OMOP Visit Occurence Table objects.\",\"jurisdiction\":[{\"coding\":[{\"system\":\"http://unstats.un.org/unsd/methods/m49/m49.htm\",\"code\":\"001\",\"display\":\"World\"}]}],\"structure\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/Encounter\",\"mode\":\"source\",\"alias\":\"Encounter\"},{\"url\":\"http://hl7.org/fhir/uv/omop/StructureDefinition/VisitOccurrence\",\"mode\":\"target\",\"alias\":\"VisitTable\"}],\"group\":[{\"name\":\"VisitOccurrence\",\"input\":[{\"name\":\"src\",\"type\":\"Encounter\",\"mode\":\"source\"},{\"name\":\"tgt\",\"type\":\"VisitTable\",\"mode\":\"target\"}],\"rule\":[{\"name\":\"id\",\"source\":[{\"context\":\"src\",\"element\":\"id\",\"variable\":\"vid\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"visit_occurrence_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"vid\"}]}]},{\"name\":\"visitTypeConceptId\",\"source\":[{\"context\":\"src\",\"element\":\"id\",\"variable\":\"visitTypeConceptId\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"visit_type_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueInteger\":32817}]}]},{\"name\":\"subject\",\"source\":[{\"context\":\"src\",\"element\":\"subject.reference\",\"variable\":\"patientRef\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"person_id\",\"transform\":\"evaluate\",\"parameter\":[{\"valueId\":\"src\"},{\"valueString\":\"patientRef.substring(8)\"}]}]},{\"name\":\"mapPatientId\",\"source\":[{\"context\":\"src\",\"element\":\"subject.reference\",\"variable\":\"patientRefId\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"person_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"patientRefId\"}]}]},{\"name\":\"class\",\"source\":[{\"context\":\"src\",\"element\":\"class\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"code\",\"source\":[{\"context\":\"s\",\"element\":\"code\",\"variable\":\"a\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"visit_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]},{\"context\":\"tgt\",\"element\":\"visit_source_value\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]},{\"context\":\"tgt\",\"element\":\"visit_source_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]}]}],\"documentation\":\"src.id as id -> tgt.visit_occurrence_id = cast(id, \\\"integer\\\");\"},{\"name\":\"actualPeriod\",\"source\":[{\"context\":\"src\",\"element\":\"period\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"start\",\"source\":[{\"context\":\"s\",\"element\":\"start\",\"variable\":\"std\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"visit_start_date\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"std\"},{\"valueString\":\"date\"}]},{\"context\":\"tgt\",\"element\":\"visit_start_datetime\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"std\"}]}]},{\"name\":\"end\",\"source\":[{\"context\":\"s\",\"element\":\"end\",\"variable\":\"ed\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"visit_end_date\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"ed\"},{\"valueString\":\"date\"}]},{\"context\":\"tgt\",\"element\":\"visit_end_datetime\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"ed\"}]}]}]},{\"name\":\"admission\",\"source\":[{\"context\":\"src\",\"element\":\"admission\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"admitSource\",\"source\":[{\"context\":\"s\",\"element\":\"admitSource\",\"variable\":\"sa\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"coding\",\"source\":[{\"context\":\"sa\",\"element\":\"coding\",\"variable\":\"sc\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"code\",\"source\":[{\"context\":\"sc\",\"element\":\"code\",\"variable\":\"code\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"admitted_from_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"code\"}]},{\"context\":\"tgt\",\"element\":\"admitted_from_source_value\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"code\"}]}]}]}]},{\"name\":\"dischargeDisposition\",\"source\":[{\"context\":\"s\",\"element\":\"dischargeDisposition\",\"variable\":\"sd\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"coding\",\"source\":[{\"context\":\"sd\",\"element\":\"coding\",\"variable\":\"sc\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"code\",\"source\":[{\"context\":\"sc\",\"element\":\"code\",\"variable\":\"code\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"discharged_to_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"code\"}]},{\"context\":\"tgt\",\"element\":\"discharged_to_source_value\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"code\"}]}]}]}]}]}]}]}",
                "output_omop_data": ""
            },
            "type": "transform_fhir_data_node",
            "width": 353,
            "height": 213,
            "dragging": false,
            "position": {
                "x": 770,
                "y": 740
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 770,
                "y": 740
            }
        },
        {
            "id": "53923929-57cc-4bac-b644-78348d982bb3",
            "data": {
                "id": "ConditionMap",
                "name": "transform_to_condition_occurrence",
                "error": false,
                "dataframe": "Condition_df",
                "description": "Describe the task of node transform_fhir_data_node_7",
                "errorMessage": null,
                "structure_map": "{\"resourceType\":\"StructureMap\",\"id\":\"ConditionMap\",\"text\":{\"status\":\"generated\",\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"><p class=\\\"res-header-id\\\"><b>Generated Narrative: StructureMap ConditionMap</b></p><a name=\\\"ConditionMap\\\"> </a><a name=\\\"hcConditionMap\\\"> </a><pre class=\\\"fml\\\">\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>url</b> = </span><span style=\\\"color: blue\\\">'http://hl7.org/fhir/uv/omop/StructureMap/ConditionMap'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>name</b> = </span><span style=\\\"color: blue\\\">'ConditionMap'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>title</b> = </span><span style=\\\"color: blue\\\">'Mapping Condition resource to Condition Occurrence OMOP Domain'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>status</b> = </span><span style=\\\"color: blue\\\">'draft'</span>\\r\\n\\r\\n<b>uses</b><span style=\\\"color: navy\\\"> &quot;</span><a href=\\\"http://hl7.org/fhir/R5/condition.html\\\" title=\\\"Condition\\\">http://hl7.org/fhir/StructureDefinition/Condition</a><span style=\\\"color: navy\\\">&quot; </span><b>alias </b>Condition <b>as </b><b>source</b>\\r\\n<b>uses</b><span style=\\\"color: navy\\\"> &quot;</span><a href=\\\"StructureDefinition-ConditionOccurrence.html\\\" title=\\\"Condition Occurrence OMOP Table\\\">http://hl7.org/fhir/uv/omop/StructureDefinition/ConditionOccurrence</a><span style=\\\"color: navy\\\">&quot; </span><b>alias </b>ConOccTable <b>as </b><b>target</b>\\r\\n\\r\\n<b>group </b>ConditionOccurrence<span style=\\\"color: navy\\\">(</span><b>source</b> <span style=\\\"color: maroon\\\">src</span><span style=\\\"color: navy\\\"> : </span>Condition, <b>target</b> <span style=\\\"color: maroon\\\">tgt</span><span style=\\\"color: navy\\\"> : </span>ConOccTable<span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\"> {\\r\\n</span>  src.code<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    s.coding<b> as </b><span style=\\\"color: maroon\\\">sc</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      sc.code<b> as </b><span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.condition_concept_id = <span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span> <span style=\\\"color: navy\\\">// </span><span style=\\\"color: green\\\">src.id as id -&gt; tgt.condition_occurrence_id = cast(id, &quot;integer&quot;);</span>\\r\\n  src.recordedDate<b> as </b><span style=\\\"color: maroon\\\">rd</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.condition_start_datetime = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">rd</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'dateTime'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">, </span> tgt.condition_start_date = <span style=\\\"color: maroon\\\">rd</span><span style=\\\"color: navy\\\">;</span>\\r\\n  src.onset<span style=\\\"color: navy\\\"> : </span>dateTime<b> as </b><span style=\\\"color: maroon\\\">osd</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.condition_start_datetime = <span style=\\\"color: maroon\\\">osd</span><span style=\\\"color: navy\\\">, </span> tgt.condition_start_date = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">osd</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'date'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">;</span>\\r\\n  src.abatement<span style=\\\"color: navy\\\"> : </span>dateTime<b> as </b><span style=\\\"color: maroon\\\">abdt</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.condition_end_datetime = <span style=\\\"color: maroon\\\">adt</span><span style=\\\"color: navy\\\">, </span> tgt.condition_end_date = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">abdt</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'date'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">;</span>\\r\\n  src.category<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    s.coding<b> as </b><span style=\\\"color: maroon\\\">sc</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      sc.code<b> as </b><span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.condition_type_concept_id = <span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  src.clinicalStatus<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    s.coding<b> as </b><span style=\\\"color: maroon\\\">sc</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      sc.code<b> as </b><span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.condition_status_concept_id = <span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  src.evidence<b> as </b><span style=\\\"color: maroon\\\">s</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>    s.concept<b> as </b><span style=\\\"color: maroon\\\">sc</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>      sc.coding<b> as </b><span style=\\\"color: maroon\\\">sci</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span><span style=\\\"color: maroon\\\">tgt</span><b> then</b><span style=\\\"color: navy\\\"> {\\r\\n</span>        sci.code<b> as </b><span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span>tgt.condition_source_concept_id = <span style=\\\"color: maroon\\\">a</span><span style=\\\"color: navy\\\">;</span>\\r\\n      <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n    <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span>\\r\\n  <span style=\\\"color: navy\\\">}</span><span style=\\\"color: navy\\\">;</span> <span style=\\\"color: navy\\\">// </span><span style=\\\"color: green\\\">src.encounter as s -&gt; tgt then {</span>\\r\\n<span style=\\\"color: navy\\\">}\\r\\n\\r\\n</span></pre></div>\"},\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-wg\",\"valueCode\":\"brr\"},{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm\",\"valueInteger\":1,\"_valueInteger\":{\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-conformance-derivedFrom\",\"valueCanonical\":\"http://hl7.org/fhir/uv/omop/ImplementationGuide/hl7.fhir.uv.omop\"}]}},{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status\",\"valueCode\":\"informative\",\"_valueCode\":{\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-conformance-derivedFrom\",\"valueCanonical\":\"http://hl7.org/fhir/uv/omop/ImplementationGuide/hl7.fhir.uv.omop\"}]}}],\"url\":\"http://hl7.org/fhir/uv/omop/StructureMap/ConditionMap\",\"version\":\"1.0.0-ballot\",\"name\":\"ConditionMap\",\"title\":\"Mapping Condition resource to Condition Occurrence OMOP Domain\",\"status\":\"draft\",\"date\":\"2025-07-29T17:40:15+00:00\",\"publisher\":\"HL7 International / Biomedical Research and Regulation\",\"contact\":[{\"name\":\"HL7 International / Biomedical Research and Regulation\",\"telecom\":[{\"system\":\"url\",\"value\":\"http://www.hl7.org/Special/committees/rcrim\"}]}],\"description\":\"This mapping maps FHIR Condition instances to OMOP Condition Occurence Table objects.\",\"jurisdiction\":[{\"coding\":[{\"system\":\"http://unstats.un.org/unsd/methods/m49/m49.htm\",\"code\":\"001\",\"display\":\"World\"}]}],\"structure\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/Condition\",\"mode\":\"source\",\"alias\":\"Condition\"},{\"url\":\"http://hl7.org/fhir/uv/omop/StructureDefinition/ConditionOccurrence\",\"mode\":\"target\",\"alias\":\"ConOccTable\"}],\"group\":[{\"name\":\"ConditionOccurrence\",\"input\":[{\"name\":\"src\",\"type\":\"Condition\",\"mode\":\"source\"},{\"name\":\"tgt\",\"type\":\"ConOccTable\",\"mode\":\"target\"}],\"rule\":[{\"name\":\"code\",\"source\":[{\"context\":\"src\",\"element\":\"code\",\"variable\":\"s\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"coding\",\"source\":[{\"context\":\"s\",\"element\":\"coding\",\"variable\":\"sc\"}],\"target\":[{\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"code\",\"source\":[{\"context\":\"sc\",\"element\":\"code\",\"variable\":\"a\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"condition_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]}]}]}],\"documentation\":\"src.id as id -> tgt.condition_occurrence_id = cast(id, \\\"integer\\\");\"},{\"name\":\"recordedDate\",\"source\":[{\"context\":\"src\",\"element\":\"recordedDate\",\"variable\":\"rd\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"condition_start_datetime\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"rd\"},{\"valueString\":\"dateTime\"}]},{\"context\":\"tgt\",\"element\":\"condition_start_date\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"rd\"}]}]},{\"name\":\"onsetDateTime\",\"source\":[{\"context\":\"src\",\"type\":\"dateTime\",\"element\":\"onset\",\"variable\":\"osd\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"condition_start_datetime\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"osd\"}]},{\"context\":\"tgt\",\"element\":\"condition_start_date\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"osd\"},{\"valueString\":\"date\"}]}]},{\"name\":\"abatementDateTime\",\"source\":[{\"context\":\"src\",\"type\":\"dateTime\",\"element\":\"abatement\",\"variable\":\"abdt\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"condition_end_datetime\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"adt\"}]},{\"context\":\"tgt\",\"element\":\"condition_end_date\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"abdt\"},{\"valueString\":\"date\"}]}]},{\"name\":\"category\",\"source\":[{\"context\":\"src\",\"element\":\"category\",\"variable\":\"s\"}],\"target\":[{\"context\":\"tgt\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"coding\",\"source\":[{\"context\":\"s\",\"element\":\"coding\",\"variable\":\"sc\"}],\"target\":[{\"context\":\"tgt\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"code\",\"source\":[{\"context\":\"sc\",\"element\":\"code\",\"variable\":\"a\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"condition_type_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]}]}]}]},{\"name\":\"clinicalStatus\",\"source\":[{\"context\":\"src\",\"element\":\"clinicalStatus\",\"variable\":\"s\"}],\"target\":[{\"context\":\"tgt\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"coding\",\"source\":[{\"context\":\"s\",\"element\":\"coding\",\"variable\":\"sc\"}],\"target\":[{\"context\":\"tgt\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"code\",\"source\":[{\"context\":\"sc\",\"element\":\"code\",\"variable\":\"a\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"condition_status_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]}]}]}]},{\"name\":\"evidence\",\"source\":[{\"context\":\"src\",\"element\":\"evidence\",\"variable\":\"s\"}],\"target\":[{\"context\":\"tgt\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"concept\",\"source\":[{\"context\":\"src\",\"element\":\"concept\",\"variable\":\"sc\"}],\"target\":[{\"context\":\"tgt\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"coding\",\"source\":[{\"context\":\"sc\",\"element\":\"coding\",\"variable\":\"sci\"}],\"target\":[{\"context\":\"tgt\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"tgt\"}]}],\"rule\":[{\"name\":\"code\",\"source\":[{\"context\":\"sci\",\"element\":\"code\",\"variable\":\"a\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"condition_source_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"a\"}]}]}]}]}],\"documentation\":\"src.encounter as s -> tgt then {\"}]}]}",
                "output_omop_data": ""
            },
            "type": "transform_fhir_data_node",
            "width": 353,
            "height": 213,
            "dragging": false,
            "position": {
                "x": 790,
                "y": 450
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 790,
                "y": 450
            }
        },
        {
            "id": "14f6c52b-5c9e-4cb7-8ed9-8636c4e6bed8",
            "data": {
                "id": "PersonMap",
                "name": "transform_to_person",
                "error": false,
                "dataframe": "Patient_df",
                "description": "Describe the task of node transform_fhir_data_node_8",
                "errorMessage": null,
                "structure_map": "{\"resourceType\":\"StructureMap\",\"id\":\"PersonMap\",\"text\":{\"status\":\"generated\",\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"><p class=\\\"res-header-id\\\"><b>Generated Narrative: StructureMap PersonMap</b></p><a name=\\\"PersonMap\\\"> </a><a name=\\\"hcPersonMap\\\"> </a><pre class=\\\"fml\\\">\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>url</b> = </span><span style=\\\"color: blue\\\">'http://hl7.org/fhir/uv/omop/StructureMap/PersonMap'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>name</b> = </span><span style=\\\"color: blue\\\">'PersonMap'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>title</b> = </span><span style=\\\"color: blue\\\">'Mapping Patient resource to Person OMOP Domain'</span>\\r\\n<span style=\\\"color: #cc00cc\\\">/// <b>status</b> = </span><span style=\\\"color: blue\\\">'draft'</span>\\r\\n\\r\\n<b>uses</b><span style=\\\"color: navy\\\"> &quot;</span><a href=\\\"http://hl7.org/fhir/R5/patient.html\\\" title=\\\"Patient\\\">http://hl7.org/fhir/StructureDefinition/Patient</a><span style=\\\"color: navy\\\">&quot; </span><b>alias </b>Patient <b>as </b><b>source</b>\\r\\n<b>uses</b><span style=\\\"color: navy\\\"> &quot;</span><a href=\\\"StructureDefinition-Person.html\\\" title=\\\"Person OMOP Table\\\">http://hl7.org/fhir/uv/omop/StructureDefinition/Person</a><span style=\\\"color: navy\\\">&quot; </span><b>alias </b>PersonTable <b>as </b><b>target</b>\\r\\n\\r\\n<b>group </b>Person<span style=\\\"color: navy\\\">(</span><b>source</b> <span style=\\\"color: maroon\\\">src</span><span style=\\\"color: navy\\\"> : </span>Patient, <b>target</b> <span style=\\\"color: maroon\\\">tgt</span><span style=\\\"color: navy\\\"> : </span>PersonTable<span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\"> {\\r\\n</span>  src.gender<b> as </b><span style=\\\"color: maroon\\\">gender</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.gender_concept_id = <span style=\\\"color: maroon\\\">gender</span><span style=\\\"color: navy\\\">, </span> tgt.gender_source_value = <b>cast</b><span style=\\\"color: navy\\\">(</span><span style=\\\"color: maroon\\\">gender</span><span style=\\\"color: navy\\\">, </span><span style=\\\"color: blue\\\">'string'</span><span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">;</span> <span style=\\\"color: navy\\\">// </span><span style=\\\"color: green\\\">src.id as id -&gt; tgt.person_id = cast(id, &quot;integer&quot;);</span>\\r\\n  src.birthDate<b> as </b><span style=\\\"color: maroon\\\">bdSrc</span><span style=\\\"color: navy\\\"><b> -&gt; </b></span> tgt.birth_datetime = <span style=\\\"color: maroon\\\">bdSrc</span><span style=\\\"color: navy\\\">, </span> tgt.year_of_birth = <span style=\\\"color: navy\\\">(</span>src.birthDate.toString().substring(0, 4)<span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">, </span> tgt.month_of_birth = <span style=\\\"color: navy\\\">(</span>src.birthDate.toString().substring(5, 2)<span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">, </span> tgt.day_of_birth = <span style=\\\"color: navy\\\">(</span>src.birthDate.toString().substring(8, 2)<span style=\\\"color: navy\\\">)</span><span style=\\\"color: navy\\\">;</span>\\r\\n<span style=\\\"color: navy\\\">}\\r\\n\\r\\n</span></pre></div>\"},\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-wg\",\"valueCode\":\"brr\"},{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm\",\"valueInteger\":1,\"_valueInteger\":{\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-conformance-derivedFrom\",\"valueCanonical\":\"http://hl7.org/fhir/uv/omop/ImplementationGuide/hl7.fhir.uv.omop\"}]}},{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status\",\"valueCode\":\"informative\",\"_valueCode\":{\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-conformance-derivedFrom\",\"valueCanonical\":\"http://hl7.org/fhir/uv/omop/ImplementationGuide/hl7.fhir.uv.omop\"}]}}],\"url\":\"http://hl7.org/fhir/uv/omop/StructureMap/PersonMap\",\"version\":\"1.0.0-ballot\",\"name\":\"PersonMap\",\"title\":\"Mapping Patient resource to Person OMOP Domain\",\"status\":\"draft\",\"date\":\"2025-07-29T17:40:15+00:00\",\"publisher\":\"HL7 International / Biomedical Research and Regulation\",\"contact\":[{\"name\":\"HL7 International / Biomedical Research and Regulation\",\"telecom\":[{\"system\":\"url\",\"value\":\"http://www.hl7.org/Special/committees/rcrim\"}]}],\"description\":\"This mapping maps FHIR Patient instances to OMOP Person Table objects.\",\"jurisdiction\":[{\"coding\":[{\"system\":\"http://unstats.un.org/unsd/methods/m49/m49.htm\",\"code\":\"001\",\"display\":\"World\"}]}],\"structure\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/Patient\",\"mode\":\"source\",\"alias\":\"Patient\"},{\"url\":\"http://hl7.org/fhir/uv/omop/StructureDefinition/Person\",\"mode\":\"target\",\"alias\":\"PersonTable\"}],\"group\":[{\"name\":\"Person\",\"input\":[{\"name\":\"src\",\"type\":\"Patient\",\"mode\":\"source\"},{\"name\":\"tgt\",\"type\":\"PersonTable\",\"mode\":\"target\"}],\"rule\":[{\"name\":\"person_id\",\"source\":[{\"context\":\"src\",\"element\":\"id\",\"variable\":\"patientId\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"person_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"patientId\"}]}]},{\"name\":\"gender\",\"source\":[{\"context\":\"src\",\"element\":\"gender\",\"variable\":\"gender\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"gender_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"gender\"}]},{\"context\":\"tgt\",\"element\":\"gender_source_value\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"gender\"},{\"valueString\":\"string\"}]}],\"documentation\":\"src.id as id -> tgt.person_id = cast(id, \\\"integer\\\");\"},{\"name\":\"birthDate\",\"source\":[{\"context\":\"src\",\"element\":\"birthDate\",\"variable\":\"bdSrc\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"birth_datetime\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"bdSrc\"}]},{\"context\":\"tgt\",\"element\":\"year_of_birth\",\"transform\":\"evaluate\",\"parameter\":[{\"valueId\":\"src\"},{\"valueString\":\"birthDate.substring(0,4)\"}]},{\"context\":\"tgt\",\"element\":\"month_of_birth\",\"transform\":\"evaluate\",\"parameter\":[{\"valueId\":\"src\"},{\"valueString\":\"birthDate.substring(5,2)\"}]},{\"context\":\"tgt\",\"element\":\"day_of_birth\",\"transform\":\"evaluate\",\"parameter\":[{\"valueId\":\"src\"},{\"valueString\":\"birthDate.substring(8,2)\"}]}]},{\"name\":\"raceConcept\",\"source\":[{\"context\":\"src\",\"element\":\"extension.where(url = 'http://hl7.org/fhir/us/core/StructureDefinition/us-core-race').extension.valueCoding.display\",\"variable\":\"race\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"race_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"race\"}]}]},{\"name\":\"ethnicity_concept_id\",\"documentation\":\"Map FHIR US Core ethnicity extension to OMOP person.ethnicity_concept_id\",\"source\":[{\"context\":\"src\",\"element\":\"extension.where(url = 'http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity').extension.where(url = 'ombCategory').valueCoding.code\",\"variable\":\"ethnicityCode\"}],\"target\":[{\"context\":\"tgt\",\"element\":\"ethnicity_concept_id\",\"transform\":\"copy\",\"parameter\":[{\"valueId\":\"ethnicityCode\"}]}]}]}]}",
                "output_omop_data": ""
            },
            "type": "transform_fhir_data_node",
            "width": 353,
            "height": 213,
            "dragging": false,
            "position": {
                "x": 760,
                "y": 150
            },
            "selected": false,
            "dragHandle": "",
            "sourcePosition": "right",
            "targetPosition": "left",
            "positionAbsolute": {
                "x": 760,
                "y": 150
            }
        }
    ],
    "variables": [],
    "importLibs": []
}
