{"id":"c48b4827-0626-450b-96ae-ee22243fbc4c","name":"testFileNode","flow":{"edges":[{"id":"reactflow__edge-b6ad9f27-4073-4a34-b9b5-ebb3e9ec9e55source_b6ad9f27-4073-4a34-b9b5-ebb3e9ec9e55_any-fde165da-0723-43c8-8dff-963c49181a76target_fde165da-0723-43c8-8dff-963c49181a76_any","source":"b6ad9f27-4073-4a34-b9b5-ebb3e9ec9e55","target":"fde165da-0723-43c8-8dff-963c49181a76","sourceHandle":"source_b6ad9f27-4073-4a34-b9b5-ebb3e9ec9e55_any","targetHandle":"target_fde165da-0723-43c8-8dff-963c49181a76_any"},{"id":"reactflow__edge-a1c23953-e541-4487-9825-2825f8204cc1source_a1c23953-e541-4487-9825-2825f8204cc1_any-fde165da-0723-43c8-8dff-963c49181a76target_fde165da-0723-43c8-8dff-963c49181a76_any","source":"a1c23953-e541-4487-9825-2825f8204cc1","target":"fde165da-0723-43c8-8dff-963c49181a76","sourceHandle":"source_a1c23953-e541-4487-9825-2825f8204cc1_any","targetHandle":"target_fde165da-0723-43c8-8dff-963c49181a76_any"},{"id":"reactflow__edge-fde165da-0723-43c8-8dff-963c49181a76source_fde165da-0723-43c8-8dff-963c49181a76_object-1a256c27-e86e-41d5-bd6d-338f2fe2ee7atarget_1a256c27-e86e-41d5-bd6d-338f2fe2ee7a_any","source":"fde165da-0723-43c8-8dff-963c49181a76","target":"1a256c27-e86e-41d5-bd6d-338f2fe2ee7a","sourceHandle":"source_fde165da-0723-43c8-8dff-963c49181a76_object","targetHandle":"target_1a256c27-e86e-41d5-bd6d-338f2fe2ee7a_any"}],"nodes":[{"id":"fde165da-0723-43c8-8dff-963c49181a76","data":{"name":"SetConstants","description":"Set constants for the flow","python_code":"def exec(myinput):\n  config_file = myinput[\"JsonConfiguration\"].result\n  INPUT_DIR = myinput[\"data_file\"].result\n  input_dir = Path(INPUT_DIR).resolve()\n  output_dir = input_dir.parent / \"fhir_output\" # or you can set it as your desired target destination\n  output_dir.mkdir(exist_ok=True)\n  return {\n    \"ANONYMIZER_DLL\" : \"/app/data_transformation/fhir-anonymizer/Microsoft.Health.Fhir.Anonymizer.R4.CommandLineTool.dll\",\n    \"CONFIG_FILE\" : config_file,\n    \"INPUT_DIR\" : str(input_dir),\n    \"OUTPUT_DIR\" : str(output_dir)\n  }"},"type":"python_node","width":350,"height":210,"dragging":false,"position":{"x":-1340,"y":100},"selected":false,"dragHandle":"","sourcePosition":"right","targetPosition":"left","positionAbsolute":{"x":-1340,"y":100}},{"id":"1a256c27-e86e-41d5-bd6d-338f2fe2ee7a","data":{"name":"anonymizer","description":"Describe the task of node python_node_2","python_code":"import subprocess\n\ndef exec(myinput) -> str:\n    input_dir = myinput[\"SetConstants\"].result\n    ANONYMIZER_DLL = myinput[\"SetConstants\"].result.get(\"ANONYMIZER_DLL\")\n    output_dir = myinput[\"SetConstants\"].result.get(\"OUTPUT_DIR\")\n\n    config_dir = Path(myinput[\"SetConstants\"].result.get(\"CONFIG_FILE\"))\n    # Get the first (and presumably only) file inside the folder\n    config_file = next(config_dir.glob(\"*\"))\n    # Run the anonymizer tool\n    cmd = [\n        \"dotnet\", \n        ANONYMIZER_DLL,\n        \"-i\", input_dir,\n        \"-o\", output_dir,\n        \"-c\", str(config_file)\n    ]\n    subprocess.run(cmd, check=True)\n    return output_dir\n    "},"type":"python_node","width":354,"height":214,"dragging":false,"position":{"x":-750,"y":100},"selected":false,"dragHandle":"","sourcePosition":"right","targetPosition":"left","positionAbsolute":{"x":-750,"y":100}},{"id":"b6ad9f27-4073-4a34-b9b5-ebb3e9ec9e55","data":{"file":"A.json","name":"data_file","encoding":"utf-8","file_type":"json","description":"Describe the task of node file_node_0"},"type":"file_node","width":350,"height":210,"dragging":false,"position":{"x":-2040,"y":-100},"selected":false,"dragHandle":"","sourcePosition":"right","targetPosition":"left","positionAbsolute":{"x":-2040,"y":-100}},{"id":"a1c23953-e541-4487-9825-2825f8204cc1","data":{"file":"","name":"JsonConfiguration","encoding":"utf-8","description":"Describe the task of node file_node_1"},"type":"file_node","width":350,"height":210,"dragging":false,"position":{"x":-2030,"y":260},"selected":false,"dragHandle":"","sourcePosition":"right","targetPosition":"left","positionAbsolute":{"x":-2030,"y":260}}],"variables":[],"importLibs":["import requests","import json","import os","from pathlib import Path","from time import sleep"]},"createdBy":"ijmqp2sgffy8","createdDate":"2025-10-07T15:16:36.468Z"}