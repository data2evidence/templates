{
    "id":"630dd05a-bedf-477c-916c-ab3c86530f11",
    "name":"SurvivalAnalysis_CS",
    "notebookContent":"---\nipynb_metadata:\n  language_info:\n    name: python\njupystar:\n  version: 0.2.1\n---\n# %%--- [markdown]\n# id: fc468ce0\n# properties: {}\n# ---%%\n### Kaplan Meier Survival Analysis using CohortSurvival Module\n# %%--- [markdown]\n# id: d99b3574\n# properties: {}\n# ---%%\n#### Research Question - Among patients initiating celecoxib, what is the time to first gastrointestinal (GI) bleed.  \n# %%--- [markdown]\n# id: 5425aa4a\n# properties: {}\n# ---%%\n##### Step 1 - Import the necessary libraries\n# %%--- [jupyter]\n# id: 89a0f60f\n# properties: {}\n# vscode:\n#   languageId: plaintext\n# ---%%\nlibrary(dplyr)\nlibrary(Strategus)\n# %%--- [markdown]\n# id: e425265a\n# properties: {}\n# ---%%\n##### Step 2 - Cohort definition loading\n# %%--- [jupyter]\n# id: 7da3ccda\n# properties: {}\n# vscode:\n#   languageId: plaintext\n# ---%%\ncohorts_set <- c()\ncohortDefinitionSet <- rD2E::get_cohort_definition_set(cohorts_set)\n# %%--- [markdown]\n# id: \"43587657\"\n# properties: {}\n# ---%%\n##### Step 3 - Define the network study components\n# %%--- [jupyter]\n# id: c36b414c\n# properties: {}\n# vscode:\n#   languageId: plaintext\n# ---%%\n# Study time window\nstudyStartDate <- \"19000101\" # YYYYMMDD\nstudyEndDate <- \"20231231\" # YYYYMMDD\n# %%--- [jupyter]\n# id: \"2059e768\"\n# properties: {}\n# vscode:\n#   languageId: plaintext\n# ---%%\ntargetCohortId <- 1\noutcomeCohortId <- 3\n\n# Stratification variables (if any)\n# strata <- list(\n#   #gender = c(\"gender\")\n#   age = c(\"gender\")\n# )\n# strata <- list(\"gender\")\nstrata <- NULL\n# %%--- [jupyter]\n# id: 1e26abdf\n# properties: {}\n# vscode:\n#   languageId: plaintext\n# ---%%\n# CohortSurvivalModule ---------------------------------------------------------\ncsModuleSettingsCreator <- CohortSurvivalModule$new()\n\ncohortSurvivalModuleSpecifications <- csModuleSettingsCreator$createModuleSpecifications(\n  targetCohortId = targetCohortId,\n  outcomeCohortId = outcomeCohortId,\n  strata = strata,\n  analysisType = \"single_event\",\n  competingOutcomeCohortTable = NULL\n)\n# %%--- [jupyter]\n# id: 49aa1896\n# properties: {}\n# vscode:\n#   languageId: plaintext\n# ---%%\n# Cohort Generator -------------------------------------------------------------\ncgModuleSettingsCreator <- CohortGeneratorModule$new()\ncohortDefinitionShared <- cgModuleSettingsCreator$createCohortSharedResourceSpecifications(cohortDefinitionSet)\ncohortGeneratorModuleSpecifications <- cgModuleSettingsCreator$createModuleSpecifications()\n# %%--- [jupyter]\n# id: 25a14566\n# properties: {}\n# vscode:\n#   languageId: plaintext\n# ---%%\n# Create the analysis specifications -------------------------------------------\nanalysisSpecifications <- Strategus::createEmptyAnalysisSpecificiations() |>\n  Strategus::addSharedResources(cohortDefinitionShared) |>\n  Strategus::addModuleSpecifications(cohortGeneratorModuleSpecifications) |>\n  Strategus::addModuleSpecifications(cohortSurvivalModuleSpecifications)\n\ncat(\"Analysis specifications saved to\", path, \"\\n\")\n# %%--- [markdown]\n# id: a6ba85ac\n# properties: {}\n# ---%%\n##### Step 4 - Execute the Strategus study\n# %%--- [jupyter]\n# id: d3c783e3\n# properties: {}\n# vscode:\n#   languageId: plaintext\n# ---%%\noptions <- create_options(upload_results=TRUE, study_id = 'survival_analysis_study_cs') # set a study_id with a unique id\noptions$study_id = 'survival_analysis_study_cs'\nrD2E::run_strategus_flow(analysisSpecification = analysisSpecifications, options = options)","isShared":false,
    "datasetId":"1fe550a9-115e-4c91-bb26-9d4505b93d88"
}