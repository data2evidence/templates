{
  "id":"a9101be4-d11a-477b-b3e2-88da8338e027",
  "name":"TreatmentUtilization",
  "notebookContent":"---\nipynb_metadata:\n  kernelspec:\n    display_name: semantic_search_venv\n    language: python\n    name: python3\n  language_info:\n    name: python\n    version: 3.8.20\njupystar:\n  version: 0.2.1\n---\n# %%--- [markdown]\n# properties: {}\n# ---%%\n\n### Treatment Pathways Network Study Using Strategus\n# %%--- [markdown]\n# properties: {}\n# ---%%\n##### Research Question - In patients diagnosed with depression, what antidepressant treatments (SSRIs, SNRIs, and bupropion) were they exposed to, and in what order?\n# %%--- [markdown]\n# properties: {}\n# ---%%\n##### Step 1 - Import the necessary libraries\n# %%--- [jupyter]\n# properties: {}\n# ---%%\n# import libraries\nlibrary(rD2E)\nlibrary(Strategus)\nlibrary(dplyr)\n# %%--- [markdown]\n# properties: {}\n# ---%%\n#### Step 2 - Cohort definition loading\n# %%--- [jupyter]\n# properties: {}\n# ---%%\ncohorts_set <- c(15, 16, 17, 18)\ncohortDefinitionSet <- rD2E::get_cohort_definition_set(cohorts_set)\n# %%--- [markdown]\n# properties: {}\n# ---%%\n##### Step 3 - Define the network study components\n# %%--- [jupyter]\n# properties: {}\n# ---%%\n# Study period\nstudyStartDate <- \"19001201\"\nstudyEndDate <- \"20231231\"\n\n# Shared resources\ncgModuleSettingsCreator <- CohortGeneratorModule$new()\ncohortDefinitionShared <- cgModuleSettingsCreator$createCohortSharedResourceSpecifications(cohortDefinitionSet)\ncohortGeneratorModuleSpecifications <- cgModuleSettingsCreator$createModuleSpecifications(generateStats = TRUE)\n# %%--- [jupyter]\n# properties: {}\n# ---%%\n# TreatmentPatterns module setup\ntpModuleSettingsCreator <- TreatmentPatternsModule$new()\n\ntreatmentPatternsSpecifications <- tpModuleSettingsCreator$createModuleSpecifications(\n  cohorts = data.frame(\n                cohortId = c(15, 16, 17, 18),\n                cohortName = c(\"depression\", \"SNRI\", \"SSRI\", \"BUPROPION\"),\n                type = c(\"target\", \"event\", \"event\", \"event\")\n            ),\n  \t\t\twindowEnd = 365\n)\n# %%--- [jupyter]\n# properties: {}\n# ---%%\n# Create analysis spec\nanalysisSpecifications <- Strategus::createEmptyAnalysisSpecificiations() |>\n  Strategus::addSharedResources(cohortDefinitionShared) |>\n  Strategus::addModuleSpecifications(cohortGeneratorModuleSpecifications) |>\n  Strategus::addModuleSpecifications(treatmentPatternsSpecifications)\n# %%--- [markdown]\n# properties: {}\n# ---%%\n##### Step 4 - Execute the Strategus study\n# %%--- [jupyter]\n# properties: {}\n# ---%%\noptions <- create_options(upload_results=TRUE, study_id = 'treatment_pathways_study_3') # set a study_id with a unique id\noptions$study_id = 'treatment_pathways_study_3'\nrD2E::run_strategus_flow(analysisSpecification = analysisSpecifications, options = options)",
  "isShared":false,
  "datasetId":"1fe550a9-115e-4c91-bb26-9d4505b93d88"
}