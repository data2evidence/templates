{
  "id":"e59d71fc-f880-4a10-8f16-f521b4f26532",
  "name":"Treatment Pathways Network Study Using Strategus",
  "notebookContent":"---\nipynb_metadata:\n  kernelspec:\n    display_name: semantic_search_venv\n    language: python\n    name: python3\n  language_info:\n    name: python\n    version: 3.8.20\njupystar:\n  version: 0.2.1\n---\n# %% [markdown]\n\n### Treatment Pathways Network Study Using Strategus\n# %% [markdown]\n##### Research Question - In patients diagnosed with depression, what antidepressant treatments (SSRIs, SNRIs, and bupropion) were they exposed to, and in what order?\n# %% [markdown]\n##### Step 1 - Import the necessary libraries\n# %% [jupyter]\n# import libraries\nlibrary(rD2E)\nlibrary(Strategus)\nlibrary(dplyr)\n# %% [markdown]\n#### Step 2 - Cohort definition loading\n# %% [jupyter]\ncohorts_set <- c(65, 66, 67, 68)\ncohortDefinitionSet <- rD2E::get_cohort_definition_set(cohorts_set)\n# %% [markdown]\n##### Step 3 - Define the network study components\n# %% [jupyter]\n# Study period\nstudyStartDate <- \"19001201\"\nstudyEndDate <- \"20231231\"\n\n# Shared resources\ncgModuleSettingsCreator <- CohortGeneratorModule$new()\ncohortDefinitionShared <- cgModuleSettingsCreator$createCohortSharedResourceSpecifications(cohortDefinitionSet)\ncohortGeneratorModuleSpecifications <- cgModuleSettingsCreator$createModuleSpecifications(generateStats = TRUE)\n# %% [jupyter]\n# TreatmentPatterns module setup\ntpModuleSettingsCreator <- TreatmentPatternsModule$new()\n\ntreatmentPatternsSpecifications <- tpModuleSettingsCreator$createModuleSpecifications(\n  cohorts = data.frame(\n                cohortId = c(68, 67, 66, 65),\n                cohortName = c(\"depression\", \"SNRI\", \"SSRI\", \"BUPROPION\"),\n                type = c(\"target\", \"event\", \"event\", \"event\")\n            ),\n  \t\t\twindowEnd = 365\n)\n# %% [jupyter]\n# Create analysis spec\nanalysisSpecifications <- Strategus::createEmptyAnalysisSpecificiations() |>\n  Strategus::addSharedResources(cohortDefinitionShared) |>\n  Strategus::addModuleSpecifications(cohortGeneratorModuleSpecifications) |>\n  Strategus::addModuleSpecifications(treatmentPatternsSpecifications)\n# %% [markdown]\n##### Step 4 - Execute the Strategus study\n# %% [jupyter]\noptions <- create_options(upload_results=TRUE, study_id = 'treatment_pathways_study') # set a study_id with a unique id\nrD2E::run_strategus_flow(analysisSpecification = analysisSpecifications, options = options)",
  "isShared":true,
  "datasetId":"a45d3365-cf3c-43f6-820a-c13c2bba9bac"
}